!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.Astarisx=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){var h=f("./src/core.js");f("./lib/custom-event-polyfill");g.exports=h},{"./lib/custom-event-polyfill":2,"./src/core.js":6}],2:[function(f,g,e){if(!window.CustomEvent||typeof window.CustomEvent!=="function"){var h=function(j,k){var i;k=k||{bubbles:false,cancelable:false,detail:undefined};i=document.createEvent("CustomEvent");i.initCustomEvent(j,k.bubbles,k.cancelable,k.detail);return i};h.prototype=window.Event.prototype;window.CustomEvent=h}},{}],3:[function(h,g,j){var o=h("path-to-regexp");g.exports=q;var t=window.history.location||window.location;var p=true;var f="";var m;var e=false;function q(y,x){if("function"===typeof y){return q("*",y)}if("function"===typeof x){var v=new n(y);for(var w=1;w<arguments.length;++w){q.callbacks.push(v.middleware(arguments[w]))}}else{if("string"==typeof y){"string"===typeof x?q.redirect(y,x):q.show(y,x)}else{q.start(y)}}}q.callbacks=[];q.base=function(v){if(0===arguments.length){return f}f=v};q.start=function(w){w=w||{};if(m){return}m=true;if(false===w.dispatch){p=false}if(false!==w.popstate){window.addEventListener("popstate",r,false)}if(false!==w.click){window.addEventListener("click",u,false)}if(true===w.hashbang){e=true}if(!p){return}var v=(e&&t.hash.indexOf("#!")===0)?t.hash.substr(2)+t.search:t.pathname+t.search+t.hash;q.replace(v,null,true,p)};q.stop=function(){m=false;removeEventListener("click",u,false);removeEventListener("popstate",r,false)};q.show=function(y,x,w){var v=new s(y,x);if(false!==w){q.dispatch(v)}if(false!==v.handled){v.pushState()}return v};q.redirect=function(w,v){q(w,function(x){setTimeout(function(){q.replace(v)})})};q.replace=function(y,x,z,w){var v=new s(y,x);v.init=z;v.save();if(false!==w){q.dispatch(v)}return v};q.dispatch=function(v){var w=0;function x(){var y=q.callbacks[w++];if(!y){return k(v)}y(v,x)}x()};function k(v){if(v.handled){return}var w=t.pathname+t.search;if(w===v.canonicalPath){return}q.stop();v.handled=false;t.href=v.canonicalPath}function s(y,w){if("/"===y[0]&&0!==y.indexOf(f)){y=f+y}var v=y.indexOf("?");this.canonicalPath=y;this.path=y.replace(f,"")||"/";this.title=document.title;this.state=w||{};this.state.path=y;this.querystring=~v?y.slice(v+1):"";this.pathname=~v?y.slice(0,v):y;this.params=[];this.hash="";if(!~this.path.indexOf("#")){return}var x=this.path.split("#");this.path=x[0];this.hash=x[1]||"";this.querystring=this.querystring.split("#")[0]}q.Context=s;s.prototype.pushState=function(){history.pushState(this.state,this.title,e&&this.canonicalPath!=="/"?"#!"+this.canonicalPath:this.canonicalPath)};s.prototype.save=function(){history.replaceState(this.state,this.title,e&&this.canonicalPath!=="/"?"#!"+this.canonicalPath:this.canonicalPath)};function n(w,v){v=v||{};this.path=(w==="*")?"(.*)":w;this.method="GET";this.regexp=o(this.path,this.keys=[],v.sensitive,v.strict)}q.Route=n;n.prototype.middleware=function(w){var v=this;return function(x,y){if(v.match(x.path,x.params)){return w(x,y)}y()}};n.prototype.match=function(D,y){var C=this.keys,E=D.indexOf("?"),v=~E?D.slice(0,E):D,x=this.regexp.exec(decodeURIComponent(v));if(!x){return false}for(var z=1,A=x.length;z<A;++z){var B=C[z-1];var w="string"===typeof x[z]?decodeURIComponent(x[z]):x[z];if(B){y[B.name]=undefined!==y[B.name]?y[B.name]:w}else{y.push(w)}}return true};function r(w){if(w.state){var v=w.state.path;q.replace(v,w.state)}}function u(y){if(1!=i(y)){return}if(y.metaKey||y.ctrlKey||y.shiftKey){return}if(y.defaultPrevented){return}var v=y.target;while(v&&"A"!=v.nodeName){v=v.parentNode}if(!v||"A"!=v.nodeName){return}var w=v.getAttribute("href");if(v.pathname===t.pathname&&(v.hash||"#"===w)){return}if(w&&w.indexOf("mailto:")>-1){return}if(v.target){return}if(!l(v.href)){return}var x=v.pathname+v.search+(v.hash||"");var z=x+v.hash;x=x.replace(f,"");if(f&&z===x){return}y.preventDefault();q.show(z)}function i(v){v=v||window.event;return null===v.which?v.button:v.which}function l(w){var v=t.protocol+"//"+t.hostname;if(t.port){v+=":"+t.port}return(w&&(0===w.indexOf(v)))}q.sameOrigin=l},{"path-to-regexp":4}],4:[function(h,i,f){i.exports=j;var g=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g");function k(l){return l.replace(/([=!:$\/()])/g,"\\$1")}var e=function(l,m){l.keys=m;return l};function j(s,r,t){if(r&&!Array.isArray(r)){t=r;r=null}r=r||[];t=t||{};var p=t.strict;var n=t.end!==false;var l=t.sensitive?"":"i";var o=0;if(s instanceof RegExp){var m=s.source.match(/\((?!\?)/g)||[];r.push.apply(r,m.map(function(v,u){return{name:u,delimiter:null,optional:false,repeat:false}}));return e(s,r)}if(Array.isArray(s)){s=s.map(function(u){return j(u,r,t).source});return e(new RegExp("(?:"+s.join("|")+")",l),r)}s=s.replace(g,function(w,u,x,A,D,z,B,C){if(u){return u}if(C){return"\\"+C}var v=B==="+"||B==="*";var y=B==="?"||B==="*";r.push({name:A||o++,delimiter:x||"/",optional:y,repeat:v});x=x?"\\"+x:"";D=k(D||z||"[^"+(x||"\\/")+"]+?");if(v){D=D+"(?:"+x+D+")*"}if(y){return"(?:"+x+"("+D+"))?"}return x+"("+D+")"});var q=s[s.length-1]==="/";if(!p){s=(q?s.slice(0,-2):s)+"(?:\\/(?=$))?"}if(!n){s+=p&&q?"":"(?=\\/|$)"}return e(new RegExp("^"+s+(n?"$":""),l),r)}},{}],5:[function(h,f,i){var m=h("./utils");var k=m.extend;var j=m.isArray;var n=m.isObject;var e=m.freeze;var l=m.deepFreeze;var g={Mixin:{construct:function(q,p){var s=false;var o=false;var t=this.getDescriptor();t.proto.setState=q;t.proto.revert=function(u){this.setState(this._previousState,!!this._previousState?this:void (0),u)};t.proto.advance=function(u){if(this.$canAdvance){this.setState(this._nextState,this._nextState._nextState,u)}};t.proto.initializeDataContext=function(x){var y=Array.prototype.slice.call(arguments,0);var u;var A={};var C,B,w,z;if(x===void (0)){A={"*":[]}}else{if(j(x)){y=y[0]}u=y.length;for(var v=0;v<u;v++){y[v];if(n(y[v])){for(C in y[v]){if(y[v].hasOwnProperty(C)){if(j(y[v][C])){A[C]=y[v][C]}else{A[C]=y[v][C]===void (0)?[]:[y[v][C]]}}}}else{A[y[v]]=[]}}}w="*" in A?t.viewModels:A;for(B in w){if(w.hasOwnProperty(B)){if((B in this)&&!!this[B].dataContextWillInitialize){z=A[B]||[];z=z.concat(A["*"]||A["_*"]||[]);this[B].dataContextWillInitialize.apply(this[B],z);delete Object.getPrototypeOf(this[B]).dataContextWillInitialize}}}};var r=function(G,D,z,v,H,A,B,C){var y=t.freezeFields,E=Object.create(t.proto,t.descriptor),x,F=G===void (0),u,w;A=H?A:false;if(!F){if(H){w=G.$pageNotFound===void (0)?false:G.$pageNotFound;Object.defineProperty(E,"$pageNotFound",{configurable:false,enumerable:false,writable:false,value:w});Object.defineProperty(E,"$forceReplace",{configurable:false,enumerable:false,writable:false,value:G.$forceReplace===void (0)?false:G.$forceReplace});Object.defineProperty(E,"$pushState",{configurable:false,enumerable:true,writable:false,value:G.$pushState===void (0)?true:G.$pushState});if(!("$path" in E)&&("$path" in G)){Object.defineProperty(E,"$path",{configurable:false,enumerable:true,writable:false,value:G.$path})}}if(G.$enableUndo===void (0)){u=false}else{v=G.$enableUndo;u=G.$enableUndo;if(!G.$enableUndo){H=false}}}if(v||H){if(!!D&&(!A||u||w)&&B&&C){s=u;o=w;Object.defineProperty(E,"_previousState",{configurable:false,enumerable:false,writable:false,value:D});Object.defineProperty(E,"$canRevert",{configurable:false,enumerable:false,writable:false,value:true})}else{Object.defineProperty(E,"$canRevert",{configurable:false,enumerable:false,writable:false,value:false})}if(!!z&&("_state" in z)&&!s&&!o){Object.defineProperty(E,"_nextState",{configurable:false,enumerable:false,writable:false,value:z});Object.defineProperty(E,"$canAdvance",{configurable:false,enumerable:false,writable:false,value:true})}else{s=u;o=w;Object.defineProperty(E,"$canAdvance",{configurable:false,enumerable:false,writable:false,value:false})}}if(F){G=("getInitialState" in t.originalSpec)?t.originalSpec.getInitialState.call(E):{};if(H){Object.defineProperty(E,"$path",{configurable:false,enumerable:true,writable:false,value:G.$path||"/"})}}else{if("_state" in G){delete G._state;Object.defineProperty(E,"_state",{configurable:true,enumerable:false,writable:true,value:G});G=k(G,E)}}if(y!==void (0)){for(x=y.length-1;x>=0;x--){if(y[x].kind==="object"||y[x].kind==="pseudoObject"){if(n(G[y[x].fieldName])){Object.freeze(G[y[x].fieldName])}}else{if(y[x].kind==="object:freeze"||y[x].kind==="pseudoObject:freeze"){e(G[y[x].fieldName])}else{if(y[x].kind==="object:deepFreeze"||y[x].kind==="pseudoObject:deepFreeze"){l(G[y[x].fieldName])}else{if(y[x].kind!=="instance"){if(!j(G[y[x].fieldName])){G[y[x].fieldName]=[]}if(y[x].kind==="array:freeze"||y[x].kind==="pseudoArray:freeze"){e(G[y[x].fieldName])}else{if(y[x].kind==="array:deepFreeze"||y[x].kind==="pseudoArray:deepFreeze"){l(G[y[x].fieldName])}else{Object.freeze(G[y[x].fieldName])}}}}}}}}Object.defineProperty(E,"_state",{configurable:false,enumerable:false,writable:false,value:G});return E};return r}}};f.exports=g},{"./utils":10}],6:[function(k,f,y){var g=k("./model");var i=k("./viewModel");var s=k("./controllerViewModel");var q=k("./mixin");var j=k("page");var u=k("./utils");var t=u.extend;var h=u.mixInto;var l=u.createMergedResultFunction;var v=u.createChainedFunction;var r=u.uuid;var n=function(){};var x=function(){};var o=function(){};var m;var p;var w;h(n,g.Mixin);h(x,i.Mixin);h(o,s.Mixin);var e={createClass:function(A,B,z){var E=function(){};E.prototype=new A();E.prototype.constructor=E;var D=E;var C=function(F){var G=new D();return G.construct.apply(C,arguments)};C.componentConstructor=E;E.ConvenienceConstructor=C;C.originalSpec=z;C.type=E;E.prototype.type=E;C.classType=B;E.prototype.classType=B;C.getDescriptor=function(){var P={},R=this.prototype,M={},K,V,J,L,O=false,Y,X,W={},G;if("__processedSpec__" in this.originalSpec){return this.originalSpec.__processedSpec__}var S={};var N={},T={};if("mixins" in this.originalSpec){for(var U=0;U<this.originalSpec.mixins.length;U++){X=this.originalSpec.mixins[U];for(var I in X){if(!X.hasOwnProperty(I)){continue}if(("get" in X[I]||"set" in X[I])&&!(I in this.originalSpec)){S[I]=X[I]}else{if(I.substring(0,3)==="get"){N[I]=N[I]||[];N[I].push(X[I])}else{T[I]=T[I]||[];T[I].push(X[I])}}}}for(var Q in N){if(N.hasOwnProperty(Q)){if(N[Q].length===1&&!(Q in this.originalSpec)){this.originalSpec[Q]=N[Q][0]}else{if(Q in this.originalSpec){N[Q].push(this.originalSpec[Q])}this.originalSpec[Q]=l(N[Q])}}}for(var H in T){if(T.hasOwnProperty(H)){if(T[H].length===1&&!(H in this.originalSpec)){this.originalSpec[H]=T[H][0]}else{if(H in this.originalSpec){T[H].push(this.originalSpec[H])}this.originalSpec[H]=v(T[H])}}}this.originalSpec=t(this.originalSpec,S);delete this.originalSpec.mixins}for(Y in this.originalSpec){if(this.originalSpec.hasOwnProperty(Y)){if("get" in this.originalSpec[Y]||"set" in this.originalSpec[Y]){W[Y]=t(this.originalSpec[Y]);if(!("enumerable" in W[Y])){if(R.constructor.classType==="Model"&&Y[0]==="_"){W[Y].enumerable=false;L=L||[];L.push(Y)}else{W[Y].enumerable=true}}if(R.constructor.classType==="ControllerViewModel"&&("viewModel" in W[Y])){if(Y!=="*"&&Y!=="_*"){M[Y]=W[Y].viewModel}delete W[Y].viewModel;delete W[Y].set}else{if(R.constructor.classType==="Model"&&("aliasFor" in W[Y])){V=V||{};V[W[Y].aliasFor]=Y;delete W[Y].aliasFor}if(R.constructor.classType==="Model"&&("validate" in W[Y])&&Object.prototype.toString.call(W[Y].validate)==="[object Object]"){delete W[Y].validate.set;P["$"+Y+"Valid"]=W[Y].validate;G=G||[];G.push(W[Y].validate.get);delete W[Y].validate}if("kind" in W[Y]){if(W[Y].kind==="pseudo"){W[Y].enumerable=false}else{if((R.constructor.classType!=="ControllerViewModel"&&W[Y].kind==="instance")||W[Y].kind==="object"||W[Y].kind==="object:freeze"||W[Y].kind==="object:deepFreeze"||W[Y].kind==="array"||W[Y].kind==="array:freeze"||W[Y].kind==="array:deepFreeze"||W[Y].kind==="pseudoObject"||W[Y].kind==="pseudoObject:freeze"||W[Y].kind==="pseudoObject:deepFreeze"||W[Y].kind==="pseudoArray"||W[Y].kind==="pseudoArray:freeze"||W[Y].kind==="pseudoArray:deepFreeze"){K=K||[];K.push({fieldName:Y,kind:W[Y].kind});if(W[Y].kind==="pseudoObject"||W[Y].kind==="pseudoObject:freeze"||W[Y].kind==="pseudoObject:deepFreeze"||W[Y].kind==="pseudoArray"||W[Y].kind==="pseudoArray:freeze"||W[Y].kind==="pseudoArray:deepFreeze"){W[Y].enumerable=false}delete W[Y].set}else{if(R.constructor.classType==="ControllerViewModel"&&W[Y].kind==="static"){J=J||{};O=true;J[Y]=void (0)}else{if(R.constructor.classType==="Model"&&W[Y].kind==="uid"){}else{throw new TypeError('"'+W[Y].kind+'" is not a valid "kind" value. Please review field "'+Y+'".')}}}}delete W[Y].kind}}P[Y]=W[Y]}else{if(Y!=="getInitialState"&&Y!=="getWatchedState"&&Y!=="getRoutes"&&Y!=="getDisplays"&&Y!="getTransitions"){R[Y]=this.originalSpec[Y]}}}}if(R.constructor.classType==="ControllerViewModel"){this.originalSpec.getViewModels=function(){return M}}if(R.constructor.classType==="Model"){if(G!==void (0)){var F=G.length;if(F>0){P.$allValid={get:function(){var aa=true;for(var Z=0;Z<F;Z++){if(!!!G[Z].call(this)){aa=false;break}}return aa}}}}P.$dirty={get:function(){return this._state.$dirty===void (0)?false:this._state.$dirty}};R.__clientFields=function(){return L||[]}}this.originalSpec.__processedSpec__={descriptor:P,proto:R,originalSpec:this.originalSpec||{},freezeFields:K,aliases:V,statics:J,clientFields:L,hasStatic:O,viewModels:M};return this.originalSpec.__processedSpec__};return C}};m=e.createClass.bind(this,n,"Model");p=e.createClass.bind(this,x,"ViewModel");w=e.createClass.bind(this,o,"ControllerViewModel");f.exports={createModelClass:m,createMClass:m,createVMClass:p,createViewModelClass:p,createControllerViewModelClass:w,createCVMClass:w,mixin:q,extend:t,uuid:r,page:j}},{"./controllerViewModel":5,"./mixin":7,"./model":8,"./utils":10,"./viewModel":11,page:3}],7:[function(g,e,h){var m=g("./stateManager");var i;var l={ui:{initializeAppContext:function(o,n){i=new m(this,o,n)},componentWillUnmount:function(){if("sessionStorage" in window){window.sessionStorage.clear()}i.dispose()}},view:{getInitialState:function(){return{appContext:i.currentState(),containerType:"view"}},componentDidMount:function(){i.mountView(this)},componentWillUnmount:function(){i.unmountView(this)}},display:{getInitialState:function(){return{containerType:"display"}},componentDidMount:function(){this.props.appContext.cueDisplay(this)}},page:{getInitialState:function(){return{containerType:"page"}},componentDidMount:function(){this.props.appContext.cuePage(this)}},pushState:{componentDidMount:function(){this.getDOMNode().addEventListener("click",this.onclick)},componentWillUnmount:function(){this.getDOMNode().removeEventListener("click")},which:function(n){n=n||window.event;return null==n.which?n.button:n.which},sameOrigin:function(o){var n=location.protocol+"//"+location.hostname;if(location.port){n+=":"+location.port}return 0==o.indexOf(n)},onclick:function(q){if(1!=this.which(q)){return}if(q.metaKey||q.ctrlKey||q.shiftKey){return}if(q.defaultPrevented){return}var n=q.target;while(n&&"A"!=n.nodeName){n=n.parentNode}if(!n||"A"!=n.nodeName){return}var o=n.getAttribute("href");if(n.pathname==location.pathname&&(n.hash||"#"==o)){return}if(n.target){return}if(!this.sameOrigin(n.href)){return}var p=n.pathname+n.search+(n.hash||"");var r=p+n.hash;q.preventDefault();p=p.replace(Astarisx.page.base(),"");if(Astarisx.page.base()&&r==p||n.href===n.baseURI+n.search+(n.hash||"")){return}Astarisx.page.show(r)}},mediaQuery:{mediaChangeHandler:function(p,n,o){i.currentState().mediaChangeHandler.call(i.currentState(),p,n,o)},componentDidMount:function(){var s=document.styleSheets;var o=s.length;var r=true;var u,v,t,n;for(var q=0;q<o;q+=1){u=s[q].cssRules;v=u.length;for(var p=0;p<v;p+=1){if(u[p].constructor===CSSMediaRule){if(!!u[p].cssRules.length){n=u[p].cssRules[0].selectorText.split("#");if(n.length===2&&n[0]===".media"){t=window.matchMedia(u[p].media.mediaText);t.addListener(this.mediaChangeHandler.bind(this,n[1]));if(r){this.mediaChangeHandler(n[1],t,r)}else{this.mediaChangeHandler(t)}}}}}}}}};var j={getInitialState:function(){return{appContext:i.currentState(),containerType:"display"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cueDisplay(this)},componentWillUnmount:function(){i.unmountView(this)}};var k={getInitialState:function(){return{appContext:i.currentState(),containerType:"page"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cuePage(this)},componentWillUnmount:function(){i.unmountView(this)}};var f=l.view;Object.defineProperty(l.view,"display",{configurable:false,enumerable:false,writable:false,value:j});Object.defineProperty(l.view,"page",{configurable:false,enumerable:false,writable:false,value:k});e.exports=l},{"./stateManager":9}],8:[function(h,f,i){var m=h("./utils");var k=m.extend;var n=m.isObject;var j=m.isArray;var e=m.freeze;var l=m.deepFreeze;var g={Mixin:{construct:function(o){var q=this.getDescriptor();var p=function(u,s){var v=q.freezeFields,t,r=Object.create(q.proto,q.descriptor);u=k(u,s);if(q.aliases!==void (0)){for(var w in q.aliases){if(q.aliases.hasOwnProperty(w)&&(w in u)){u[q.aliases[w]]=u[w];delete u[w]}}}Object.defineProperty(r,"_state",{configurable:true,enumerable:false,writable:true,value:u});if("getInitialState" in q.originalSpec){u=k(u,q.originalSpec.getInitialState.call(r))}if(v!==void (0)){for(t=v.length-1;t>=0;t--){if(v[t].kind==="object"||v[t].kind==="pseudoObject"){if(n(u[v[t].fieldName])){Object.freeze(u[v[t].fieldName])}}else{if(v[t].kind==="object:freeze"||v[t].kind==="pseudoObject:freeze"){e(u[v[t].fieldName])}else{if(v[t].kind==="object:deepFreeze"||v[t].kind==="pseudoObject:deepFreeze"){l(u[v[t].fieldName])}else{if(v[t].kind!=="instance"){if(!j(u[v[t].fieldName])){u[v[t].fieldName]=[]}if(v[t].kind==="array:freeze"||v[t].kind==="pseudoArray:freeze"){e(u[v[t].fieldName])}else{if(v[t].kind==="array:deepFreeze"||v[t].kind==="pseudoArray:deepFreeze"){l(u[v[t].fieldName])}else{Object.freeze(u[v[t].fieldName])}}}}}}}}Object.defineProperty(r,"_state",{configurable:false,enumerable:false,writable:false,value:u});if(o){Object.defineProperty(r,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(){return o})()})}return Object.freeze(r)};return p}}};f.exports=g},{"./utils":10}],9:[function(g,f,h){var k=g("page");var o=g("./utils");var j=o.extend;var m=o.updateStatic;var e=o.uuid;var i=o.isArray;var l=o.isControllerViewModel;var n;var p=function(G,K,L){var H=e(),Q,O,q,N,u,V,B={},F=false,C={},W,t={},S={},w,A={},y={},P,J,T,D,z,s=false,I={},U={},r,x=false,E=false,M=this;M.appState={};M.listeners={};M.handlers={};M.hasListeners=false;Q=K.controllerViewModel;u="enableUndo" in K?K.enableUndo:false;V="enableRouting" in K?K.enableRouting:false;M.signInUrl=K.signInUrl;O=function(X){G.setState({appContext:X})};var v=function(aq,X,Y,aj,ad,aw){var ag={},ae=void (0),ax=void (0),ai,af,ab,av,ah,ar,ak,au=[],am,an,aa,al,Z=false,ac=false,ao;if(arguments.length<=2||(typeof X==="function")){if(X===void (0)||!!!Object.keys(X).length||(typeof X==="function")){s=false;if(M.hasListeners){ao=new CustomEvent("stateChange",{detail:M.appState});if(y.$notify){if(i(y.$notify)){y.$notify.forEach(function(ay){if(ay==="*"){O(M.appState)}else{if(ay in M.listeners){M.listeners[ay].dispatchEvent(ao)}}})}else{if(y.$notify==="*"){O(M.appState)}else{if(y.$notify in M.listeners){M.listeners[y.$notify].dispatchEvent(ao)}}}}else{O(M.appState);for(var ap in M.listeners){if(M.listeners.hasOwnProperty(ap)){M.listeners[ap].dispatchEvent(ao)}}}ao=void (0)}else{O(M.appState)}A={};y={};if(typeof X==="function"){if(Y!==void (0)&&!isNaN(Y)){window.setTimeout(function(){if(aq===H){X.call(M.appState,void (0),M.appState)}else{X.call(M.appState[aq],void (0),M.appState)}},Y)}else{if(aq===H){X.call(M.appState,void (0),M.appState)}else{X.call(M.appState[aq],void (0),M.appState)}}}return}}if(typeof aj==="function"){aw=ad;ad=aj;aj=true}else{if(typeof Y==="function"){aw=aj;ad=Y;Y={}}else{if(typeof Y==="boolean"){aj=Y;Y={}}}}if(aj===void (0)){aj=true}X=X||{};ai=Object.keys(X);Y=Y||{};if(l(X)){ac=true;ag=j(X,B);ae=X._previousState;ax=Y;for(ah in W){ag[ah]=new C[ah](ag[ah])}for(ah in W){if(W.hasOwnProperty(ah)){for(ak in t[ah]){if(t[ah].hasOwnProperty(ak)){ag[ah]._state[t[ah][ak]]=(ak in W)?j(ag[ak]):ag[ak]}}}}if(typeof ad==="function"){try{M.appState=new n(ag,ae,ax,u,V,ag.$path!==M.appState.$path,!x||ag.$pageNotFound,aj);s=true;if(aw!==void (0)&&!isNaN(aw)){window.setTimeout(function(){if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}},aw)}else{if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}}}catch(at){ad(at)}return}}else{if(F){B=m(B,X)}if(!!ai.length){if(aq===H){ag=j(X)}else{ag[aq]=j(X)}}A=j(ag,A,Y);av=Object.keys(A);if(av.length===0){if(typeof ad==="function"){s=true;if(aw!==void (0)&&!isNaN(aw)){window.setTimeout(function(){if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}},aw)}else{if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}return}}else{return}}ab=av.length-1;for(af=ab;af>=0;af--){if(av[af] in W){ag[av[af]]=j(M.appState[av[af]],A[av[af]]);ag[av[af]]=new C[av[af]](ag[av[af]])}else{ag[av[af]]=A[av[af]]}}y=j(y,ag);ag=j(M.appState,y);A={};for(af=ab;af>=0;af--){if(av[af] in S){for(an in S[av[af]]){if(S[av[af]].hasOwnProperty(an)){if(ai.indexOf(an)!==-1){aa=S[av[af]][an];for(al in aa){if(aa.hasOwnProperty(al)){if(al in t){for(ah in t[al]){if(t[al].hasOwnProperty(ah)){ag[al]._state[t[al][ah]]=(ah in W)?j(ag[ah]):ag[ah]}if(ah in t){for(ar in t[ah]){if(t[ah].hasOwnProperty(ar)){ag[ah]._state[t[ah][ar]]=(ar in W)?j(ag[ar]):ag[ar]}}}}}A=j(A,aa[al].call(M.appState[al],ag[av[af]][an],M.appState[av[af]][an],an,av[af],ag.$path,M.appState.$path))}}}}}}}if(!!Object.keys(A).length){v(void (0),{},A,aj,ad,aw);return}au=Object.keys(y);am=au.length-1;for(af=am;af>=0;af--){if(aq===H&&(H in t)){if(au[af] in t[H]){for(ah in t[H][au[af]]){if(t[H][au[af]].hasOwnProperty(ah)){ag[ah]._state[t[H][au[af]][ah]]=(au[af] in W)?j(ag[au[af]]):ag[au[af]]}if(ah in t){for(ar in t[ah]){if(t[ah].hasOwnProperty(ar)){ag[ah]._state[t[ah][ar]]=(ar in W)?j(ag[ar]):ag[ar]}}}}}}else{if(au[af] in t){for(ah in t[au[af]]){if(t[au[af]].hasOwnProperty(ah)){ag[au[af]]._state[t[au[af]][ah]]=(ah in W)?j(ag[ah]):ag[ah]}if(ah in t){for(ar in t[ah]){if(t[ah].hasOwnProperty(ar)){ag[ah]._state[t[ah][ar]]=(ar in W)?j(ag[ar]):ag[ar]}}}}}}}if(M.appState.$canRevert&&s){ae=M.appState._previousState}else{if(F&&B._staticUpdated&&B._onlyStatic){if(M.appState.$canRevert){ae=M.appState._previousState}if(M.appState.$canAdvance){ax=M.appState._nextState}}else{ae=M.appState}}}if(!!ae){Object.freeze(ae)}Z=ag.$path!==M.appState.$path;try{if(ac){ag=j(ag,{$dataContextWillUpdate:X._state.$dataContextWillUpdate})}else{ag=j(ag,{$dataContextWillUpdate:y})}M.appState=new n(ag,ae,ax,u,V,Z,!x||ag.$pageNotFound,aj);Object.freeze(M.appState);Object.freeze(M.appState._state);if(typeof ad==="function"){s=true;if(aw!==void (0)&&!isNaN(aw)){window.setTimeout(function(){if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}},aw)}else{if(aq===H){ad.call(M.appState,void (0),M.appState)}else{ad.call(M.appState[aq],void (0),M.appState)}return}}}catch(at){if(typeof ad==="function"){ad(at);return}}if(V&&M.appState.$pushState){if(("$path" in M.appState)&&!x){E=true;if(Z&&!M.appState.$forceReplace){k(M.appState.$path)}else{k.replace(M.appState.$path)}}x=false}s=false;if(M.hasListeners){ao=new CustomEvent("stateChange",{detail:M.appState});if(ag.$notify){if(i(ag.$notify)){ag.$notify.forEach(function(ay){if(ay==="*"){O(M.appState)}else{if(ay in M.listeners){M.listeners[ay].dispatchEvent(ao)}}})}else{if(ag.$notify==="*"){O(M.appState)}else{if(ag.$notify in M.listeners){M.listeners[ag.$notify].dispatchEvent(ao)}}}}else{O(M.appState);for(var ap in M.listeners){if(M.listeners.hasOwnProperty(ap)){M.listeners[ap].dispatchEvent(ao)}}}ao=void (0)}else{O(M.appState)}A={};y={}};try{n=Q.call(this,v.bind(this,H));M.appState=new n(void (0),void (0),void (0),u,V);M.appState._state=M.appState._state||{}}catch(R){if(R instanceof TypeError){throw new TypeError('Please assign a ControllerViewModel to the "controllerViewModel" prop in React.renderComponent')}else{throw R}}W=M.appState.constructor.originalSpec.getViewModels();delete Object.getPrototypeOf(M.appState).getViewModels;for(w in W){if(W.hasOwnProperty(w)){C[w]=W[w].call(this,v.bind(this,w));M.appState._state[w]=new C[w](M.appState._state[w],true)}}for(w in W){if(W.hasOwnProperty(w)){if("getWatchedState" in M.appState[w].constructor.originalSpec){P=M.appState[w].constructor.originalSpec.getWatchedState();for(J in P){if(P.hasOwnProperty(J)){if(J in W||J in M.appState){if("alias" in P[J]){if(!(w in t)){t[w]={}}t[w][J]=P[J].alias;if(!(J in W)){if(!(H in t)){t[H]={}}if(!(w in t[H])){t[H][J]={}}t[H][J][w]=P[J].alias}}for(T in P[J].fields){if(P[J].fields.hasOwnProperty(T)){if(J in W){D={};if(!(J in S)){S[J]={}}D[T]={};D[T][w]=P[J].fields[T];S[J]=D}}}}}}}}}for(w in W){if(W.hasOwnProperty(w)){for(z in t[w]){if(t[w].hasOwnProperty(z)){M.appState[w]._state[t[w][z]]=(z in W)?j(M.appState[z]):M.appState[z]}}}}for(w in W){if(W.hasOwnProperty(w)){M.appState._state[w]=new C[w](M.appState._state[w]);if("getRoutes" in M.appState[w].constructor.originalSpec){I=M.appState[w].constructor.originalSpec.getRoutes();for(r in I){if(I.hasOwnProperty(r)){U[I[r].path]=I[r].handler;k(I[r].path,function(aa,Z,X,Y){x=true;if(!E){U[Z].call(M.appState[aa],Y.params,M.appState,Y.path,X,Y,("show" in M.appState)?M.appState.show.bind(M.appState):void (0))}E=false}.bind(this,w,I[r].path,r))}}delete Object.getPrototypeOf(M.appState[w]).getRoutes}if("getDisplays" in M.appState[w].constructor.originalSpec){try{M.appState.addDisplays(M.appState[w].constructor.originalSpec.getDisplays(),w);delete Object.getPrototypeOf(M.appState[w]).getDisplays}catch(R){if(R instanceof TypeError){throw new TypeError("Please ensure that Astarisx-Animate is mixed into the ControllerViewModel.")}else{throw R}}}}}if("getDisplays" in M.appState.constructor.originalSpec){M.appState.addDisplays(M.appState.constructor.originalSpec.getDisplays());delete Object.getPrototypeOf(M.appState).getDisplays}delete Object.getPrototypeOf(M.appState).addDisplays;if("getTransitions" in M.appState.constructor.originalSpec){M.appState.addTransitions(M.appState.constructor.originalSpec.getTransitions());delete Object.getPrototypeOf(M.appState).getTransitions}delete Object.getPrototypeOf(M.appState).addTransitions;M.appState=new n(M.appState,void (0),void (0),u,V);if(V){k(function(X){x=true;M.appState.setState({"$pageNotFound":true});E=false});E=true;k.replace(M.appState.$path);k.start({click:false,dispatch:false});x=false}F=M.appState.constructor.getDescriptor().hasStatic;if(F){B=m(M.appState.constructor.getDescriptor().statics,M.appState._state)}Object.freeze(M.appState._state);Object.freeze(M.appState);O(M.appState);if("dataContextWillInitialize" in M.appState.constructor.originalSpec){M.appState.constructor.originalSpec.dataContextWillInitialize.call(M.appState,L);delete Object.getPrototypeOf(M.appState).dataContextWillInitialize}};p.prototype.currentState=function(){return this.appState};p.prototype.unmountView=function(q){var r=q.props.$viewKey||q._rootNodeID;if(this.listeners===null||this.listeners===void (0)){this.handlers=null;this.hasListeners=false;return}this.listeners[r].removeEventListener("stateChange",this.handlers[r]);delete this.listeners[r];delete this.handlers[r];if(!!!Object.keys(this.listeners).length){this.hasListeners=false}};p.prototype.mountView=function(q){var s=q.props.$viewKey||q._rootNodeID;this.handlers[s]=function(t){q.setState({appContext:t.detail})};var r=q.getDOMNode();this.listeners[s]=!!r?r:document.createElement("div");this.listeners[s].addEventListener("stateChange",this.handlers[s]);this.hasListeners=true};p.prototype.dispose=function(){var r=new n(void (0),void (0),void (0),false,false);var q={};var s=this.appState.constructor.originalSpec.getViewModels();if(!!this.signInUrl){k.replace(this.signInUrl)}if("resetDisplay" in this.appState){this.appState.resetDisplay()}for(var t in this.listeners){if(this.listeners.hasOwnProperty(t)){this.listeners[t].removeEventListener("stateChange",this.handlers[t])}}for(viewModel in s){if(s.hasOwnProperty(viewModel)){q[viewModel]=this.appState[viewModel].__dispose()}}q=j(this.appState,r,q);try{this.appState=new n(q,void (0),void (0),false,false);this.appState._state=this.appState._state||{}}catch(u){if(u instanceof TypeError){throw new TypeError("Something went wrong")}else{throw u}}delete this.appState.constructor.originalSpec.__processedSpec__;for(viewModel in s){if(s.hasOwnProperty(viewModel)){delete this.appState[viewModel].constructor.originalSpec.__processedSpec__}}this.listeners=null;this.handlers=null;this.hasListeners=false};f.exports=p},{"./utils":10,page:3}],10:[function(g,h,f){var i=Object.prototype.toString;var e={extend:function(){var j={};for(var l=0;l<arguments.length;l++){var m=arguments[l];if(typeof m==="function"){m=m.call(this)}for(var k in m){if(m.hasOwnProperty(k)){j[k]=m[k]}}if(e.isObject(m)&&e.isModel(m)&&("__clientFields" in m)){m.__clientFields().forEach(function(n){j[n]=m[n]})}}return j},updateStatic:function(){var j={};Object.defineProperty(j,"_onlyStatic",{configurable:false,enumerable:false,writable:true,value:true});Object.defineProperty(j,"_staticUpdated",{configurable:false,enumerable:false,writable:true,value:false});for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)&&k in arguments[0]){if(k in arguments[0]){j[k]=m[k];if(l>0){j._staticUpdated=true}}else{j._onlyStatic=false}}}}return j},mixInto:function(k,l){var j;for(j in l){if(!l.hasOwnProperty(j)){continue}k.prototype[j]=l[j]}},createMergedResultFunction:function(j){return function k(){return e.extend.apply(this,j)}},createChainedFunction:function(j){return function k(){for(var l=0;l<j.length;l++){j[l].apply(this,arguments)}}},uuid:function(){var j,l;var k="";for(j=0;j<32;j++){l=Math.random()*16|0;if(j===8||j===12||j===16||j===20){k+="-"}k+=(j===12?4:(j===16?(l&3|8):l)).toString(16)}return k},isObject:function(j){return i.call(j)==="[object Object]"},isArray:function(j){return i.call(j)==="[object Array]"},isModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="Model"},isViewModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="ViewModel"},isControllerViewModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="ControllerViewModel"},freeze:function(m){if(e.isObject(m)){if(!Object.isFrozen(m)){Object.freeze(m)}for(var j in m){if(m.hasOwnProperty(j)){if(e.isArray(m[j])||e.isObject(m[j])){Object.freeze(m[j])}}}}else{if(e.isArray(m)){for(var l=m.length-1;l>=0;l--){if(e.isArray(m[l])||e.isObject(m[l])){if(!Object.isFrozen(m[l])){Object.freeze(m[l])}}}}}},deepFreeze:function(m){if(e.isObject(m)){if(!Object.isFrozen(m)){Object.freeze(m)}for(var j in m){if(m.hasOwnProperty(j)){if(e.isArray(m[j])||e.isObject(m[j])){deepFreeze(Object.freeze(m[j]))}}}}else{if(e.isArray(m)){for(var l=m.length-1;l>=0;l--){if(e.isArray(m[l])||e.isObject(m[l])){deepFreeze(Object.freeze(m[l]))}}}}}};h.exports=e},{}],11:[function(g,f,i){var m=g("./utils");var k=m.extend;var n=m.isObject;var h=m.isModel;var j=m.isArray;var e=m.freeze;var l=m.deepFreeze;var o={Mixin:{construct:function(q){var r=this.getDescriptor();r.proto.setState=q;var p=function(C,w){C=C||{};C=("_state" in C?C._state:C);var s=r.freezeFields,t,A=Object.create(r.proto,r.descriptor),B,x,z;Object.defineProperty(A,"_state",{configurable:true,enumerable:false,writable:true,value:C});if(w){C=("getInitialState" in r.originalSpec)?k(C,r.originalSpec.getInitialState.call(A)):C;Object.defineProperty(A,"_state",{configurable:true,enumerable:false,writable:true,value:C})}if(s!==void (0)){for(t=s.length-1;t>=0;t--){if(s[t].kind==="instance"){if(h(A[s[t].fieldName])){B=A[s[t].fieldName].constructor.getDescriptor();z=Object.create(B.proto,B.descriptor);Object.defineProperty(z,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(D){return A[D].__stateChangeHandler})(s[t].fieldName)});Object.defineProperty(z,"_state",{configurable:true,enumerable:false,writable:true,value:A[s[t].fieldName]._state});Object.getPrototypeOf(z).setState=function(G,F,H){var D={};if(typeof F==="function"){H=F;F=void (0)}else{if(typeof G==="function"){H=G;G=void (0);F=void (0)}}if(G!==void (0)){D.$dirty=true}if(B.clientFields!==void (0)){for(var E=B.clientFields.length-1;E>=0;E--){D[B.clientFields[E]]=this[B.clientFields[E]]}}H=H?H.bind(this):void (0);this.__stateChangeHandler.call(A,k(this._state,D,G),F,H)};if(!!B.freezeFields&&!!B.freezeFields.length){for(var v=B.freezeFields.length-1;v>=0;v--){if(B.freezeFields[v].kind==="instance"&&h(A[s[t].fieldName][B.freezeFields[v].fieldName])){var u=A[s[t].fieldName][B.freezeFields[v].fieldName].constructor.getDescriptor();var y=Object.create(u.proto,u.descriptor);Object.defineProperty(y,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:z.__stateChangeHandler});Object.defineProperty(y,"_state",{configurable:true,enumerable:false,writable:true,value:z[B.freezeFields[v].fieldName]._state});Object.getPrototypeOf(y).setState=(function(D){return function(I,H,J){var F={};var E={};D=("$owner" in this._state)?this._state.$owner:D;if(typeof H==="function"){J=H;H=void (0)}else{if(typeof I==="function"){J=I;I=void (0);H=void (0)}}if(I!==void (0)){F.$dirty=true}if(u.clientFields!==void (0)){for(var G=u.clientFields.length-1;G>=0;G--){F[u.clientFields[G]]=this[u.clientFields[G]]}}E[D]=k(this._state,F,I);J=J?J.bind(this):void (0);z.__stateChangeHandler.call(A,k(z,E,{$dirty:true}),H,J)}})(B.freezeFields[v].fieldName);Object.freeze(A[s[t].fieldName][B.freezeFields[v].fieldName])}}}Object.freeze(A[s[t].fieldName])}}else{if(s[t].kind==="object"||s[t].kind==="pseudoObject"){if(n(C[s[t].fieldName])){Object.freeze(C[s[t].fieldName])}}else{if(s[t].kind==="object:freeze"||s[t].kind==="pseudoObject:freeze"){e(C[s[t].fieldName])}else{if(s[t].kind==="object:deepFreeze"||s[t].kind==="pseudoObject:deepFreeze"){l(C[s[t].fieldName])}else{if(!j(C[s[t].fieldName])){C[s[t].fieldName]=[]}if(s[t].kind==="array:freeze"||s[t].kind==="pseudoArray:freeze"){e(C[s[t].fieldName])}else{if(s[t].kind==="array:deepFreeze"||s[t].kind==="pseudoArray:deepFreeze"){l(C[s[t].fieldName])}else{Object.freeze(C[s[t].fieldName])}}}}}}}}Object.defineProperty(A,"_state",{configurable:false,enumerable:false,writable:false,value:C});return Object.freeze(A)};r.proto.__dispose=function(){return p(void (0))};return p}}};f.exports=o},{"./utils":10}]},{},[1])(1)});