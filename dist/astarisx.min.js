!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.Astarisx=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){var h=f("./src/core.js");f("./lib/custom-event-polyfill");g.exports=h},{"./lib/custom-event-polyfill":2,"./src/core.js":5}],2:[function(f,g,e){if(!window.CustomEvent||typeof window.CustomEvent!=="function"){var h=function(j,k){var i;k=k||{bubbles:false,cancelable:false,detail:undefined};i=document.createEvent("CustomEvent");i.initCustomEvent(j,k.bubbles,k.cancelable,k.detail);return i};h.prototype=window.Event.prototype;window.CustomEvent=h}},{}],3:[function(f,g,e){(function(){var o=true;var h="";var l;function p(w,v){if("function"==typeof w){return p("*",w)}if("function"==typeof v){var t=new m(w);for(var u=1;u<arguments.length;++u){p.callbacks.push(t.middleware(arguments[u]))}}else{if("string"==typeof w){p.show(w,v)}else{p.start(w)}}}p.callbacks=[];p.base=function(t){if(0==arguments.length){return h}h=t};p.start=function(u){u=u||{};if(l){return}l=true;if(false===u.dispatch){o=false}if(false!==u.popstate){window.addEventListener("popstate",q,false)}if(false!==u.click){window.addEventListener("click",s,false)}if(!o){return}var t=location.pathname+location.search+location.hash;p.replace(t,null,true,o)};p.stop=function(){l=false;removeEventListener("click",s,false);removeEventListener("popstate",q,false)};p.show=function(w,v,u){var t=new r(w,v);if(false!==u){p.dispatch(t)}if(!t.unhandled){t.pushState()}return t};p.replace=function(w,v,x,u){var t=new r(w,v);t.init=x;if(null==u){u=true}if(u){p.dispatch(t)}t.save();return t};p.dispatch=function(t){var u=0;function v(){var w=p.callbacks[u++];if(!w){return j(t)}w(t,v)}v()};function j(t){var u=window.location.pathname+window.location.search;if(u==t.canonicalPath){return}p.stop();t.unhandled=true;window.location=t.canonicalPath}function r(w,u){if("/"==w[0]&&0!=w.indexOf(h)){w=h+w}var t=w.indexOf("?");this.canonicalPath=w;this.path=w.replace(h,"")||"/";this.title=document.title;this.state=u||{};this.state.path=w;this.querystring=~t?w.slice(t+1):"";this.pathname=~t?w.slice(0,t):w;this.params=[];this.hash="";if(!~this.path.indexOf("#")){return}var v=this.path.split("#");this.path=v[0];this.hash=v[1]||"";this.querystring=this.querystring.split("#")[0]}p.Context=r;r.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)};r.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)};function m(u,t){t=t||{};this.path=u;this.method="GET";this.regexp=n(u,this.keys=[],t.sensitive,t.strict)}p.Route=m;m.prototype.middleware=function(u){var t=this;return function(v,w){if(t.match(v.path,v.params)){return u(v,w)}w()}};m.prototype.match=function(B,w){var A=this.keys,C=B.indexOf("?"),t=~C?B.slice(0,C):B,v=this.regexp.exec(t);if(!v){return false}for(var x=1,y=v.length;x<y;++x){var z=A[x-1];var u="string"==typeof v[x]?decodeURIComponent(v[x]):v[x];if(z){w[z.name]=undefined!==w[z.name]?w[z.name]:u}else{w.push(u)}}return true};function n(w,v,u,t){if(w instanceof RegExp){return w}if(w instanceof Array){w="("+w.join("|")+")"}w=w.concat(t?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(z,B,C,A,x,y){v.push({name:A,optional:!!y});B=B||"";return""+(y?"":B)+"(?:"+(y?B:"")+(C||"")+(x||(C&&"([^/.]+?)"||"([^/]+?)"))+")"+(y||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)");return new RegExp("^"+w+"$",u?"":"i")}function q(u){if(u.state){var t=u.state.path;p.replace(t,u.state)}}function s(w){if(1!=i(w)){return}if(w.metaKey||w.ctrlKey||w.shiftKey){return}if(w.defaultPrevented){return}var t=w.target;while(t&&"A"!=t.nodeName){t=t.parentNode}if(!t||"A"!=t.nodeName){return}var u=t.getAttribute("href");if(t.pathname==location.pathname&&(t.hash||"#"==u)){return}if(t.target){return}if(!k(t.href)){return}var v=t.pathname+t.search+(t.hash||"");var x=v+t.hash;v=v.replace(h,"");if(h&&x==v){return}w.preventDefault();p.show(x)}function i(t){t=t||window.event;return null==t.which?t.button:t.which}function k(u){var t=location.protocol+"//"+location.hostname;if(location.port){t+=":"+location.port}return 0==u.indexOf(t)}if("undefined"==typeof g){window.page=p}else{g.exports=p}})()},{}],4:[function(g,h,f){var e=g("./utils");var j=e.extend;var i={Mixin:{construct:function(m,l){var o=false;var k=false;var p=j(this.getDescriptor());p.proto.setState=m;p.proto.revert=function(){this.setState(this.previousState,!!this.previousState?this:void (0))};p.proto.advance=function(){if(this.canAdvance){this.setState(this.nextState,this.nextState.nextState)}};p.proto.initializeDataContext=function(t){var u=Array.prototype.slice.call(arguments,0);var q;var w={};var y,x,s,v;if(t===void (0)){w={"*":[]}}else{if(Object.prototype.toString.call(t)==="[object Array]"){u=u[0]}q=u.length;for(var r=0;r<q;r++){u[r];if(Object.prototype.toString.call(u[r])==="[object Object]"){for(y in u[r]){if(u[r].hasOwnProperty(y)){if(Object.prototype.toString.call(u[r][y])==="[object Array]"){w[y]=u[r][y]}else{w[y]=u[r][y]===void (0)?[]:[u[r][y]]}}}}else{w[u[r]]=[]}}}s="*" in w?p.viewModels:w;for(x in s){if(s.hasOwnProperty(x)){if((x in this)&&!!this[x].dataContextWillInitialize){v=w[x]||[];v=v.concat(w["*"]||w["_*"]||[]);this[x].dataContextWillInitialize.apply(this[x],v);delete this[x].__proto__.dataContextWillInitialize}}}};var n=function(C,z,v,r,D,w,x,y){var u=p.freezeFields,A=Object.create(p.proto,p.descriptor),t,B=C===void (0),q,s;w=D?w:false;if(!B){if(D){s=C.pageNotFound===void (0)?false:C.pageNotFound;Object.defineProperty(A,"pageNotFound",{configurable:false,enumerable:false,writable:false,value:s});Object.defineProperty(A,"forceReplace",{configurable:false,enumerable:false,writable:false,value:C.forceReplace===void (0)?false:C.forceReplace});Object.defineProperty(A,"pushState",{configurable:false,enumerable:true,writable:false,value:C.pushState===void (0)?true:C.pushState});if(!("path" in A)&&("path" in C)){Object.defineProperty(A,"path",{configurable:false,enumerable:true,writable:false,value:C.path})}}if(C.enableUndo===void (0)){q=false}else{r=C.enableUndo;q=C.enableUndo;if(!C.enableUndo){D=false}}}if(r||D){if(!!z&&(!w||q||s)&&!previousAdhoc&&x&&y){previousAdhoc=q;k=s;Object.defineProperty(A,"previousState",{configurable:false,enumerable:false,writable:false,value:z});Object.defineProperty(A,"canRevert",{configurable:false,enumerable:false,writable:false,value:true})}else{Object.defineProperty(A,"canRevert",{configurable:false,enumerable:false,writable:false,value:false})}if(!!v&&("state" in v)&&!previousAdhoc&&!k){Object.defineProperty(A,"nextState",{configurable:false,enumerable:false,writable:false,value:v});Object.defineProperty(A,"canAdvance",{configurable:false,enumerable:false,writable:false,value:true})}else{previousAdhoc=q;k=s;Object.defineProperty(A,"canAdvance",{configurable:false,enumerable:false,writable:false,value:false})}}if(B){C=("getInitialState" in p.originalSpec)?p.originalSpec.getInitialState.call(A):{};if(D){Object.defineProperty(A,"path",{configurable:false,enumerable:true,writable:false,value:C.path||"/"})}}else{if("state" in C){delete C.state;Object.defineProperty(A,"state",{configurable:true,enumerable:false,writable:true,value:C});C=j(C,A)}}for(t=u.length-1;t>=0;t--){if(u[t].kind==="array"){C[u[t].fieldName]=C[u[t].fieldName]||[];Object.freeze(C[u[t].fieldName])}else{throw new TypeError('kind:"instance" can only be specified in a ViewModel.')}}Object.defineProperty(A,"state",{configurable:false,enumerable:false,writable:false,value:C});return A};return n}}};h.exports=i},{"./utils":9}],5:[function(k,f,v){var g=k("./model");var i=k("./viewModel");var q=k("./controllerViewModel");var p=k("./mixin");var j=k("page");var s=k("./utils");var r=s.extend;var h=s.mixInto;var m=function(){};var u=function(){};var n=function(){};var l;var o;var t;h(m,g.Mixin);h(u,i.Mixin);h(n,q.Mixin);var e={createClass:function(x,y,w){var B=function(){};B.prototype=new x();B.prototype.constructor=B;var A=B;var z=function(C){var D=new A();return D.construct.apply(z,arguments)};z.componentConstructor=B;B.ConvenienceConstructor=z;z.originalSpec=w;z.type=B;B.prototype.type=B;z.classType=y;B.prototype.classType=y;z.getDescriptor=function(){var D={},J=this.prototype,L={},E=[],F={},M={},H=false,O,G;var K={};if("__processedSpec__" in this.originalSpec){return this.originalSpec.__processedSpec__}if("mixins" in this.originalSpec&&J.constructor.classType!=="Model"){for(var I=0;I<this.originalSpec.mixins.length;I++){G=this.originalSpec.mixins[I];for(var C in G){var N=G[C];if(!G.hasOwnProperty(C)){continue}this.originalSpec[C]=N}}delete this.originalSpec.mixins}for(O in this.originalSpec){if(this.originalSpec.hasOwnProperty(O)){if("get" in this.originalSpec[O]||"set" in this.originalSpec[O]){K[O]=r(this.originalSpec[O]);K[O].enumerable=true;if("viewModel" in K[O]&&J.constructor.classType==="ControllerViewModel"){if(O!=="*"&&O!=="_*"){L[O]=K[O].viewModel}delete K[O].viewModel;delete K[O].set}else{if("aliasFor" in K[O]&&J.constructor.classType==="Model"){F[K[O].aliasFor]=O;delete K[O].aliasFor}if("kind" in K[O]){if(K[O].kind==="pseudo"){K[O].enumerable=false}else{if((K[O].kind==="instance"&&J.constructor.classType==="ViewModel")||K[O].kind==="array"){E.push({fieldName:O,kind:K[O].kind});if(K[O].kind==="array"){delete K[O].set}}else{if(K[O].kind==="static"&&J.constructor.classType==="ControllerViewModel"){H=true;M[O]=void (0)}else{if(K[O].kind==="uid"&&J.constructor.classType==="Model"){}else{throw new TypeError('"'+K[O].kind+'" is not a valid "kind" value. Please review field "'+O+'".')}}}}delete K[O].kind}}D[O]=K[O]}else{if(O!=="getInitialState"&&O!=="getWatchedState"&&O!=="getRoutes"&&O!=="getDisplays"&&O!="getTransitions"){J[O]=this.originalSpec[O]}}}}if(J.constructor.classType==="ControllerViewModel"){this.originalSpec.getViewModels=function(){return L}}this.originalSpec.__processedSpec__={descriptor:D,proto:J,originalSpec:this.originalSpec||{},freezeFields:E,aliases:F,statics:M,hasStatic:H,viewModels:L};return this.originalSpec.__processedSpec__};return z}};l=e.createClass.bind(this,m,"Model");o=e.createClass.bind(this,u,"ViewModel");t=e.createClass.bind(this,n,"ControllerViewModel");f.exports={createModelClass:l,createMClass:l,createVMClass:o,createViewModelClass:o,createControllerViewModelClass:t,createCVMClass:t,mixin:p,extend:r,page:j}},{"./controllerViewModel":4,"./mixin":6,"./model":7,"./utils":9,"./viewModel":10,page:3}],6:[function(g,e,h){var m=g("./stateManager");var i;var l={ui:{initializeAppContext:function(o,n){i=new m(this,o,n)},componentWillUnmount:function(){i.dispose()}},view:{getInitialState:function(){return{appContext:i.currentState(),containerType:"view"}},componentDidMount:function(){i.mountView(this)},componentWillUnmount:function(){i.unmountView(this)}},display:{getInitialState:function(){return{containerType:"display"}},componentDidMount:function(){this.props.appContext.cueDisplay(this)}},page:{getInitialState:function(){return{containerType:"page"}},componentDidMount:function(){this.props.appContext.cuePage(this)}},pushState:{componentDidMount:function(){this.getDOMNode().addEventListener("click",this.onclick)},componentWillUnmount:function(){this.getDOMNode().removeEventListener("click")},which:function(n){n=n||window.event;return null==n.which?n.button:n.which},sameOrigin:function(o){var n=location.protocol+"//"+location.hostname;if(location.port){n+=":"+location.port}return 0==o.indexOf(n)},onclick:function(q){if(1!=this.which(q)){return}if(q.metaKey||q.ctrlKey||q.shiftKey){return}if(q.defaultPrevented){return}var n=q.target;while(n&&"A"!=n.nodeName){n=n.parentNode}if(!n||"A"!=n.nodeName){return}var o=n.getAttribute("href");if(n.pathname==location.pathname&&(n.hash||"#"==o)){return}if(n.target){return}if(!this.sameOrigin(n.href)){return}var p=n.pathname+n.search+(n.hash||"");var r=p+n.hash;q.preventDefault();p=p.replace(Astarisx.page.base(),"");if(Astarisx.page.base()&&r==p||n.href===n.baseURI+n.search+(n.hash||"")){return}Astarisx.page.show(r)}},mediaQuery:{mediaChangeHandler:function(p,n,o){i.currentState().mediaChangeHandler.call(i.currentState(),p,n,o)},componentDidMount:function(){var s=document.styleSheets;var o=s.length;var r=true;var u,v,t,n;for(var q=0;q<o;q+=1){u=s[q].cssRules;v=u.length;for(var p=0;p<v;p+=1){if(u[p].constructor===CSSMediaRule){if(!!u[p].cssRules.length){n=u[p].cssRules[0].selectorText.split("#");if(n.length===2&&n[0]===".media"){t=window.matchMedia(u[p].media.mediaText);t.addListener(this.mediaChangeHandler.bind(this,n[1]));if(r){this.mediaChangeHandler(n[1],t,r)}else{this.mediaChangeHandler(t)}}}}}}}}};var j={getInitialState:function(){return{appContext:i.currentState(),containerType:"display"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cueDisplay(this)},componentWillUnmount:function(){i.unmountView(this)}};var k={getInitialState:function(){return{appContext:i.currentState(),containerType:"page"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cuePage(this)},componentWillUnmount:function(){i.unmountView(this)}};var f=l.view;Object.defineProperty(l.view,"display",{configurable:false,enumerable:false,writable:false,value:j});Object.defineProperty(l.view,"page",{configurable:false,enumerable:false,writable:false,value:k});e.exports=l},{"./stateManager":8}],7:[function(g,h,f){var e=g("./utils");var j=e.extend;var i={Mixin:{construct:function(k){var m=this.getDescriptor();var l=function(r,p,n){var s=m.freezeFields,q,o=Object.create(m.proto,m.descriptor);if(r===void (0)){n=true}else{if(typeof r==="boolean"){n=r;r=void (0)}else{if(typeof p==="boolean"){n=p;p=void (0)}}}r=j(r,p);Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:r});r=j(r,o);if(n){for(var t in m.aliases){if(m.aliases.hasOwnProperty(t)&&t in r){r[m.aliases[t]]=r[t];delete r[t]}}Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:r});r=j(r,o);if("getInitialState" in m.originalSpec){r=j(r,m.originalSpec.getInitialState.call(o))}}for(q=s.length-1;q>=0;q--){if(s[q].kind==="array"){r[s[q].fieldName]=r[s[q].fieldName]||[];Object.freeze(r[s[q].fieldName])}else{throw new TypeError('kind:"instance" can only be specified in a ViewModel.')}}Object.defineProperty(o,"state",{configurable:false,enumerable:false,writable:false,value:r});Object.defineProperty(o,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(){return k})()});return Object.freeze(o)};return l}}};h.exports=i},{"./utils":9}],8:[function(g,f,h){var j=g("page");var l=g("./utils");var i=l.extend;var k=l.updateStatic;var e=g("./utils").uuid;var m=function(D,I,J){var E=e(),T,N,L,n,K,r,S,y={},C=false,z={},U,q={},P={},t,x={},v={},M,H,Q,A,w,p=false,F={},R={},o,u=false,B=false,G=this;G.appState={};G.listeners={};G.handlers={};G.hasListeners=false;N=I.controllerViewModel;r="enableUndo" in I?I.enableUndo:false;S="enableRouting" in I?I.enableRouting:false;L=function(V){D.setState({appContext:V})};var s=function(ao,V,W,ah,ab,ar){var ae={},ac=void (0),at=void (0),ag,ad,Z,af,ai,aq=[],ak,al,Y,aj,X=false,aa=false,am;if(arguments.length<2){V=G.appState}if(typeof ah==="function"){ar=ab;ab=ah;ah=true}else{if(typeof W==="function"){ar=ah;ab=W;W={}}else{if(typeof W==="boolean"){ah=W;W={}}}}if(ah===void (0)){ah=true}V=V||{};ag=Object.keys(V);if(Object.getPrototypeOf(V).constructor.classType==="ControllerViewModel"){aa=true;ae=i(V,y);ac=V.previousState;at=W;for(af in U){ae[af]=new z[af](ae[af])}for(af in U){if(U.hasOwnProperty(af)){for(ai in q[af]){if(q[af].hasOwnProperty(ai)){ae[af].state[q[af][ai]]=(ai in U)?i(ae[ai].state):ae[ai]}}}}if(typeof ab==="function"){try{G.appState=new T(ae,ac,at,r,S,ae.path!==G.appState.path,!u||ae.pageNotFound,ah);p=true;if(!!ar){window.setTimeout(function(){if(ao===E){ab.call(G.appState,void (0),G.appState)}else{ab.call(G.appState[ao],void (0),G.appState)}},ar)}else{if(ao===E){ab.call(G.appState,void (0),G.appState)}else{ab.call(G.appState[ao],void (0),G.appState)}}}catch(ap){ab(ap)}return}}else{if(C){y=k(y,V)}if(!!ag.length){if(ao===E){ae=i(V)}else{ae[ao]=i(V)}}x=i(ae,x,W);transientStateKeys=Object.keys(x);if(transientStateKeys.length===0){return}Z=transientStateKeys.length-1;for(ad=Z;ad>=0;ad--){if(transientStateKeys[ad] in U){ae[transientStateKeys[ad]]=i(G.appState[transientStateKeys[ad]],x[transientStateKeys[ad]]);ae[transientStateKeys[ad]]=new z[transientStateKeys[ad]](ae[transientStateKeys[ad]])}else{ae[transientStateKeys[ad]]=x[transientStateKeys[ad]]}}v=i(v,ae);ae=i(G.appState,v);x={};for(ad=Z;ad>=0;ad--){if(transientStateKeys[ad] in P){for(al in P[transientStateKeys[ad]]){if(P[transientStateKeys[ad]].hasOwnProperty(al)){if(ag.indexOf(al)!==-1){Y=P[transientStateKeys[ad]][al];for(aj in Y){if(Y.hasOwnProperty(aj)){if(aj in q){for(af in q[aj]){if(q[aj].hasOwnProperty(af)){ae[aj].state[q[aj][af]]=(af in U)?i(ae[af].state):ae[af]}if(af in q){for(dataContext2 in q[af]){if(q[af].hasOwnProperty(dataContext2)){ae[af].state[q[af][dataContext2]]=(dataContext2 in U)?i(ae[dataContext2].state):ae[dataContext2]}}}}}x=i(x,Y[aj].call(G.appState[aj],ae[transientStateKeys[ad]][al],G.appState[transientStateKeys[ad]][al],al,transientStateKeys[ad],ae.path,G.appState.path))}}}}}}}if(!!Object.keys(x).length){s(void (0),{},x,ah,ab,ar);return}aq=Object.keys(v);ak=aq.length-1;for(ad=ak;ad>=0;ad--){if(ao===E&&(E in q)){if(aq[ad] in q[E]){for(af in q[E][aq[ad]]){if(q[E][aq[ad]].hasOwnProperty(af)){ae[af].state[q[E][aq[ad]][af]]=ae[aq[ad]]}if(af in q){for(dataContext2 in q[af]){if(q[af].hasOwnProperty(dataContext2)){ae[af].state[q[af][dataContext2]]=(dataContext2 in U)?i(ae[dataContext2].state):ae[dataContext2]}}}}}}else{if(aq[ad] in q){for(af in q[aq[ad]]){if(q[aq[ad]].hasOwnProperty(af)){ae[aq[ad]].state[q[aq[ad]][af]]=ae[af]}if(af in q){for(dataContext2 in q[af]){if(q[af].hasOwnProperty(dataContext2)){ae[af].state[q[af][dataContext2]]=ae[dataContext2]}}}}}}}if(G.appState.canRevert&&p){ac=G.appState.previousState}else{if(C&&y._staticUpdated&&y._onlyStatic){if(G.appState.canRevert){ac=G.appState.previousState}if(G.appState.canAdvance){at=G.appState.nextState}}else{ac=G.appState}}}if(!!ac){Object.freeze(ac)}X=ae.path!==G.appState.path;try{if(aa){ae=i(ae,{dataContextWillUpdate:V.state.dataContextWillUpdate})}else{ae=i(ae,{dataContextWillUpdate:v})}G.appState=new T(ae,ac,at,r,S,X,!u||ae.pageNotFound,ah);Object.freeze(G.appState);Object.freeze(G.appState.state);if(typeof ab==="function"){p=true;if(!!ar){window.setTimeout(function(){if(ao===E){ab.call(G.appState,void (0),G.appState)}else{ab.call(G.appState[ao],void (0),G.appState)}},ar)}else{if(ao===E){ab.call(G.appState,void (0),G.appState)}else{ab.call(G.appState[ao],void (0),G.appState)}return}}}catch(ap){if(typeof ab==="function"){ab(ap);return}}if(S&&G.appState.pushState){if(("path" in G.appState)&&!u){B=true;if(X&&!G.appState.forceReplace){j(G.appState.path)}else{j.replace(G.appState.path)}}u=false}p=false;x={};v={};if(G.hasListeners){am=new CustomEvent("stateChange",{detail:G.appState});if(ae.notify){if(Object.prototype.toString.call(ae.notify)==="[object Array]"){ae.notify.forEach(function(au){if(au==="*"){L(G.appState)}else{if(au in G.listeners){G.listeners[au].dispatchEvent(am)}}})}else{if(ae.notify==="*"){L(G.appState)}else{if(ae.notify in G.listeners){G.listeners[ae.notify].dispatchEvent(am)}}}}else{L(G.appState);for(var an in G.listeners){if(G.listeners.hasOwnProperty(an)){G.listeners[an].dispatchEvent(am)}}}am=void (0)}else{L(G.appState)}};try{T=N.call(this,s.bind(this,E));G.appState=new T(void (0),void (0),void (0),r,S);G.appState.state=G.appState.state||{}}catch(O){if(O instanceof TypeError){throw new TypeError('Please assign a ControllerViewModel to the "controllerViewModel" prop in React.renderComponent')}else{throw O}}this.viewModels=G.appState.constructor.originalSpec.getViewModels();U=this.viewModels;delete G.appState.__proto__.getViewModels;for(t in U){if(U.hasOwnProperty(t)){z[t]=U[t].call(this,s.bind(this,t));G.appState.state[t]=new z[t](G.appState.state[t],true)}}for(t in U){if(U.hasOwnProperty(t)){if("getWatchedState" in G.appState[t].constructor.originalSpec){M=G.appState[t].constructor.originalSpec.getWatchedState();for(H in M){if(M.hasOwnProperty(H)){if(H in U||H in G.appState){if("alias" in M[H]){if(!(t in q)){q[t]={}}q[t][H]=M[H].alias;if(!(H in U)){if(!(E in q)){q[E]={}}if(!(t in q[E])){q[E][H]={}}q[E][H][t]=M[H].alias}}for(Q in M[H].fields){if(M[H].fields.hasOwnProperty(Q)){if(H in U){A={};if(!(H in P)){P[H]={}}A[Q]={};A[Q][t]=M[H].fields[Q];P[H]=A}}}}}}}}}for(t in U){if(U.hasOwnProperty(t)){for(w in q[t]){if(q[t].hasOwnProperty(w)){G.appState[t].state[q[t][w]]=G.appState[w]}}}}for(t in U){if(U.hasOwnProperty(t)){G.appState.state[t]=new z[t](G.appState.state[t]);if("getRoutes" in G.appState[t].constructor.originalSpec){F=G.appState[t].constructor.originalSpec.getRoutes();for(o in F){if(F.hasOwnProperty(o)){R[F[o].path]=F[o].handler;j(F[o].path,function(Y,X,V,W){u=true;if(!B){if(G.appState.canRevert&&G.appState.pageNotFound){W.rollbackRequest=true;W.revert=function(){this.revert.bind(this);this.setState({},{path:W.path})}.bind(G.appState)}R[X].call(G.appState[Y],W.params,W.path,V,W,("show" in G.appState)?G.appState.show.bind(G.appState):void (0))}B=false}.bind(this,t,F[o].path,o))}}delete G.appState[t].__proto__.getRoutes}if("getDisplays" in G.appState[t].constructor.originalSpec){G.appState.addDisplays(G.appState[t].constructor.originalSpec.getDisplays(),t);delete G.appState[t].__proto__.getDisplays}}}if("getDisplays" in G.appState.constructor.originalSpec){G.appState.addDisplays(G.appState.constructor.originalSpec.getDisplays());delete G.appState.__proto__.getDisplays}delete G.appState.__proto__.addDisplays;if("getTransitions" in G.appState.constructor.originalSpec){G.appState.addTransitions(G.appState.constructor.originalSpec.getTransitions());delete G.appState.__proto__.getTransitions}delete G.appState.__proto__.addTransitions;G.appState=new T(G.appState,void (0),void (0),r,S);if(S){j(function(V){u=true;G.appState.setState({pageNotFound:true});B=false});B=true;j.replace(G.appState.path);j.start({click:false,dispatch:false});u=false}C=G.appState.constructor.originalSpec.__processedSpec__.hasStatic;if(C){y=k(G.appState.constructor.originalSpec.__processedSpec__.statics,G.appState.state)}Object.freeze(G.appState.state);Object.freeze(G.appState);if("dataContextWillInitialize" in G.appState.constructor.originalSpec){G.appState.constructor.originalSpec.dataContextWillInitialize.call(G.appState,J);delete G.appState.__proto__.dataContextWillInitialize}};m.prototype.currentState=function(){return this.appState};m.prototype.unmountView=function(n){var o=n.props.viewKey||n._rootNodeID;if(this.listeners===null||this.listeners===void (0)){this.handlers=null;this.hasListeners=false;return}this.listeners[o].removeEventListener("stateChange",this.handlers[o]);delete this.listeners[o];delete this.handlers[o];if(!!!Object.keys(this.listeners).length){this.hasListeners=false}};m.prototype.mountView=function(n){var p=n.props.viewKey||n._rootNodeID;this.handlers[p]=function(q){n.setState({appContext:q.detail})};var o=n.getDOMNode();this.listeners[p]=!!o?o:document.createElement("div");this.listeners[p].addEventListener("stateChange",this.handlers[p]);this.hasListeners=true};m.prototype.dispose=function(){for(var n in this.listeners){if(this.listeners.hasOwnProperty(n)){this.listeners[n].removeEventListener("stateChange",this.handlers[n])}}delete this.appState.constructor.originalSpec.__processedSpec__;for(viewModel in this.viewModels){if(this.viewModels.hasOwnProperty(viewModel)){delete this.appState[viewModel].constructor.originalSpec.__processedSpec__}}this.appState=null;this.listeners=null;this.handlers=null;this.hasListeners=false};f.exports=m},{"./utils":9,page:3}],9:[function(g,h,f){var e={extend:function(){var j={};for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)){j[k]=m[k]}}}return j},updateStatic:function(){var j={};Object.defineProperty(j,"_onlyStatic",{configurable:false,enumerable:false,writable:true,value:true});Object.defineProperty(j,"_staticUpdated",{configurable:false,enumerable:false,writable:true,value:false});for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)&&k in arguments[0]){if(k in arguments[0]){j[k]=m[k];if(l>0){j._staticUpdated=true}}else{j._onlyStatic=false}}}}return j},mixInto:function(j,k){var i;for(i in k){if(!k.hasOwnProperty(i)){continue}j.prototype[i]=k[i]}},uuid:function(){var j,l;var k="";for(j=0;j<32;j++){l=Math.random()*16|0;if(j===8||j===12||j===16||j===20){k+="-"}k+=(j===12?4:(j===16?(l&3|8):l)).toString(16)}return k}};h.exports=e},{}],10:[function(h,i,f){var e=h("./utils");var j=e.extend;var g={Mixin:{construct:function(l){var m=this.getDescriptor(this);m.proto.setState=l;var k=function(r,n){r=r||{};r=("state" in r?r.state:r);var s=m.freezeFields,q,p=Object.create(m.proto,m.descriptor),t,o;Object.defineProperty(p,"state",{configurable:true,enumerable:false,writable:true,value:r});if(n){r=("getInitialState" in m.originalSpec)?j(r,m.originalSpec.getInitialState.call(p)):r;Object.defineProperty(p,"state",{configurable:true,enumerable:false,writable:true,value:r})}for(q=s.length-1;q>=0;q--){if(s[q].kind==="instance"){if(p[s[q].fieldName]){t=p[s[q].fieldName].constructor.originalSpec.__processedSpec__;o=Object.create(t.proto,t.descriptor);Object.defineProperty(o,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(u){return p[u].__stateChangeHandler})(s[q].fieldName)});Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:p[s[q].fieldName].state});o.__proto__.setState=function(u,v){v=v?v.bind(this):void (0);this.__stateChangeHandler.call(p,j(this.state,u),v)};Object.freeze(p[s[q].fieldName])}}else{r[s[q].fieldName]=r[s[q].fieldName]||[];Object.freeze(r[s[q].fieldName])}}Object.defineProperty(p,"state",{configurable:false,enumerable:false,writable:false,value:r});return Object.freeze(p)};return k}}};i.exports=g},{"./utils":9}]},{},[1])(1)});