!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.Astarisx=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(f,g,e){var h=f("./src/core.js");f("./lib/custom-event-polyfill");g.exports=h},{"./lib/custom-event-polyfill":2,"./src/core.js":7}],2:[function(f,g,e){if(!window.CustomEvent||typeof window.CustomEvent!=="function"){var h=function(j,k){var i;k=k||{bubbles:false,cancelable:false,detail:undefined};i=document.createEvent("CustomEvent");i.initCustomEvent(j,k.bubbles,k.cancelable,k.detail);return i};h.prototype=window.Event.prototype;window.CustomEvent=h}},{}],3:[function(l,g,w){var q=l("path-to-regexp");g.exports=j;var e=("undefined"!==typeof window)&&(window.history.location||window.location);var v=true;var o=true;var k="";var h;var u=false;var t;function j(B,A){if("function"===typeof B){return j("*",B)}if("function"===typeof A){var y=new i(B);for(var z=1;z<arguments.length;++z){j.callbacks.push(y.middleware(arguments[z]))}}else{if("string"===typeof B){j["string"===typeof A?"redirect":"show"](B,A)}else{j.start(B)}}}j.callbacks=[];j.exits=[];j.current="";j.len=0;j.base=function(y){if(0===arguments.length){return k}k=y};j.start=function(z){z=z||{};if(h){return}h=true;if(false===z.dispatch){v=false}if(false===z.decodeURLComponents){o=false}if(false!==z.popstate){window.addEventListener("popstate",f,false)}if(false!==z.click){window.addEventListener("click",x,false)}if(true===z.hashbang){u=true}if(!v){return}var y=(u&&~e.hash.indexOf("#!"))?e.hash.substr(2)+e.search:e.pathname+e.search+e.hash;j.replace(y,null,true,v)};j.stop=function(){if(!h){return}j.current="";j.len=0;h=false;window.removeEventListener("click",x,false);window.removeEventListener("popstate",f,false)};j.show=function(B,A,z){var y=new r(B,A);j.current=y.path;if(false!==z){j.dispatch(y)}if(false!==y.handled){y.pushState()}return y};j.back=function(z,y){if(j.len>0){history.back();j.len--}else{if(z){setTimeout(function(){j.show(z,y)})}else{setTimeout(function(){j.show(k,y)})}}};j.redirect=function(z,y){if("string"===typeof z&&"string"===typeof y){j(z,function(A){setTimeout(function(){j.replace(y)},0)})}if("string"===typeof z&&"undefined"===typeof y){setTimeout(function(){j.replace(z)},0)}};j.replace=function(B,A,C,z){var y=new r(B,A);j.current=y.path;y.init=C;y.save();if(false!==z){j.dispatch(y)}return y};j.dispatch=function(y){var C=t,A=0,z=0;t=y;function D(){var E=j.exits[z++];if(!E){return B()}E(C,D)}function B(){var E=j.callbacks[A++];if(y.path!==j.current){y.handled=false;return}if(!E){return p(y)}E(y,B)}if(C){D()}else{B()}};function p(y){if(y.handled){return}var z;if(u){z=k+e.hash.replace("#!","")}else{z=e.pathname+e.search}if(z===y.canonicalPath){return}j.stop();y.handled=false;e.href=y.canonicalPath}j.exit=function(B,A){if(typeof B==="function"){return j.exit("*",B)}var y=new i(B);for(var z=1;z<arguments.length;++z){j.exits.push(y.middleware(arguments[z]))}};function s(y){if(typeof y!=="string"){return y}return o?decodeURIComponent(y.replace(/\+/g," ")):y}function r(B,z){if("/"===B[0]&&0!==B.indexOf(k)){B=k+(u?"#!":"")+B}var y=B.indexOf("?");this.canonicalPath=B;this.path=B.replace(k,"")||"/";if(u){this.path=this.path.replace("#!","")||"/"}this.title=document.title;this.state=z||{};this.state.path=B;this.querystring=~y?s(B.slice(y+1)):"";this.pathname=s(~y?B.slice(0,y):B);this.params={};this.hash="";if(!u){if(!~this.path.indexOf("#")){return}var A=this.path.split("#");this.path=A[0];this.hash=s(A[1])||"";this.querystring=this.querystring.split("#")[0]}}j.Context=r;r.prototype.pushState=function(){j.len++;history.pushState(this.state,this.title,u&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};r.prototype.save=function(){history.replaceState(this.state,this.title,u&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function i(z,y){y=y||{};this.path=(z==="*")?"(.*)":z;this.method="GET";this.regexp=q(this.path,this.keys=[],y.sensitive,y.strict)}j.Route=i;i.prototype.middleware=function(z){var y=this;return function(A,B){if(y.match(A.path,A.params)){return z(A,B)}B()}};i.prototype.match=function(G,B){var F=this.keys,H=G.indexOf("?"),y=~H?G.slice(0,H):G,A=this.regexp.exec(decodeURIComponent(y));if(!A){return false}for(var C=1,D=A.length;C<D;++C){var E=F[C-1];var z=s(A[C]);if(z!==undefined||!(hasOwnProperty.call(B,E.name))){B[E.name]=z}}return true};function f(z){if(z.state){var y=z.state.path;j.replace(y,z.state)}else{j.show(e.pathname+e.hash)}}function x(B){if(1!==m(B)){return}if(B.metaKey||B.ctrlKey||B.shiftKey){return}if(B.defaultPrevented){return}var y=B.target;while(y&&"A"!==y.nodeName){y=y.parentNode}if(!y||"A"!==y.nodeName){return}if(y.getAttribute("download")||y.getAttribute("rel")==="external"){return}var z=y.getAttribute("href");if(!u&&y.pathname===e.pathname&&(y.hash||"#"===z)){return}if(z&&z.indexOf("mailto:")>-1){return}if(y.target){return}if(!n(y.href)){return}var A=y.pathname+y.search+(y.hash||"");var C=A;A=A.replace(k,"");if(u){A=A.replace("#!","")}if(k&&C===A){return}B.preventDefault();j.show(C)}function m(y){y=y||window.event;return null===y.which?y.button:y.which}function n(z){var y=e.protocol+"//"+e.hostname;if(e.port){y+=":"+e.port}return(z&&(0===z.indexOf(y)))}j.sameOrigin=n},{"path-to-regexp":4}],4:[function(i,f,m){var n=i("isarray");f.exports=k;var j=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g");function p(q){return q.replace(/([=!:$\/()])/g,"\\$1")}function o(q,r){q.keys=r;return q}function g(q){return q.sensitive?"":"i"}function h(t,s){var q=t.source.match(/\((?!\?)/g);if(q){for(var r=0;r<q.length;r++){s.push({name:r,delimiter:null,optional:false,repeat:false})}}return o(t,s)}function e(v,s,q){var u=[];for(var r=0;r<v.length;r++){u.push(k(v[r],s,q).source)}var t=new RegExp("(?:"+u.join("|")+")",g(q));return o(t,s)}function l(t,s){var q=0;function r(A,u,w,z,D,y,B,C){if(u){return u}if(C){return"\\"+C}var v=B==="+"||B==="*";var x=B==="?"||B==="*";s.push({name:z||q++,delimiter:w||"/",optional:x,repeat:v});w=w?("\\"+w):"";D=p(D||y||"[^"+(w||"\\/")+"]+?");if(v){D=D+"(?:"+w+D+")*"}if(x){return"(?:"+w+"("+D+"))?"}return w+"("+D+")"}return t.replace(j,r)}function k(w,v,u){v=v||[];if(!n(v)){u=v;v=[]}else{if(!u){u={}}}if(w instanceof RegExp){return h(w,v,u)}if(n(w)){return e(w,v,u)}var s=u.strict;var r=u.end!==false;var t=l(w,v);var q=w.charAt(w.length-1)==="/";if(!s){t=(q?t.slice(0,-2):t)+"(?:\\/(?=$))?"}if(r){t+="$"}else{t+=s&&q?"":"(?=\\/|$)"}return o(new RegExp("^"+t,g(u)),v)}},{isarray:5}],5:[function(f,g,e){g.exports=Array.isArray||function(h){return Object.prototype.toString.call(h)=="[object Array]"}},{}],6:[function(h,f,i){var m=h("./utils");var k=m.extend;var j=m.isArray;var n=m.isObject;var e=m.freeze;var l=m.deepFreeze;var g={Mixin:{construct:function(p){var r=false;var o=false;var s=this.getDescriptor();s.proto.setState=p;s.proto.revert=function(u){var t;if(u!==void (0)){t=function(w,v){this.setState();u(w,v)}.bind(this)}this.setState(this.$previousState,!!this.$previousState?this:void (0),true,t,void (0),true)};s.proto.advance=function(u){var t;if(u!==void (0)){t=function(w,v){this.setState();u(w,v)}.bind(this)}if(this.$canAdvance){this.setState(this.$nextState,this.$nextState.$nextState,t)}};s.proto.initializeDataContext=function(){var x=Array.prototype.slice.call(arguments,0);var v;var w={};var t,u,A,z;if(x[0]===void (0)){w={"*":[]}}else{if(j(x[0])){x=x[0]}v=x.length;for(var y=0;y<v;y++){x[y];if(n(x[y])){for(t in x[y]){if(x[y].hasOwnProperty(t)){if(j(x[y][t])){w[t]=x[y][t]}else{w[t]=x[y][t]===void (0)?[]:[x[y][t]]}}}}else{w[x[y]]=[]}}}A="*" in w?s.viewModels:w;for(u in A){if(A.hasOwnProperty(u)){if((u in this)&&!!this[u].dataContextWillInitialize){z=[];z=z.concat(w["*"]||[]);if(u!=="*"&&u!=="_*"&&u in w){z=z.concat(w["_*"]||[]);z=z.concat(w[u]||[])}this[u].dataContextWillInitialize.apply(this[u],z);delete Object.getPrototypeOf(this[u]).dataContextWillInitialize}}}};var q=function(F,C,y,u,G,z,A,B){var x=s.freezeFields,D=Object.create(s.proto,s.descriptor),w,E=F===void (0),t,v;z=G?z:false;if(!E){if(G){v=F.$pageNotFound===void (0)?false:F.$pageNotFound;Object.defineProperty(D,"$pageNotFound",{configurable:false,enumerable:false,writable:false,value:v});Object.defineProperty(D,"$forceReplace",{configurable:false,enumerable:false,writable:false,value:F.$forceReplace===void (0)?false:F.$forceReplace});Object.defineProperty(D,"$pushState",{configurable:false,enumerable:true,writable:false,value:F.$pushState===void (0)?true:F.$pushState});if(!("$path" in D)&&("$path" in F)){Object.defineProperty(D,"$path",{configurable:false,enumerable:true,writable:false,value:F.$path})}}if(F.$enableUndo===void (0)){t=false}else{u=F.$enableUndo;t=F.$enableUndo;if(!F.$enableUndo){G=false}}}if(u||G){if(!!C&&(!z||t||v)&&A&&B){r=t;o=v;Object.defineProperty(D,"$previousState",{configurable:false,enumerable:false,writable:false,value:C});Object.defineProperty(D,"$canRevert",{configurable:false,enumerable:false,writable:false,value:true})}else{Object.defineProperty(D,"$canRevert",{configurable:false,enumerable:false,writable:false,value:false})}if(!!y&&("$state" in y)&&!r&&!o){Object.defineProperty(D,"$nextState",{configurable:false,enumerable:false,writable:false,value:y});Object.defineProperty(D,"$canAdvance",{configurable:false,enumerable:false,writable:false,value:true})}else{r=t;o=v;Object.defineProperty(D,"$canAdvance",{configurable:false,enumerable:false,writable:false,value:false})}}if(E){F=("getInitialState" in s.originalSpec)?s.originalSpec.getInitialState.call(D):{};if(G){Object.defineProperty(D,"$path",{configurable:false,enumerable:true,writable:false,value:F.$path||"/"})}}else{if("$state" in F){delete F.$state;Object.defineProperty(D,"$state",{configurable:true,enumerable:false,writable:true,value:F});F=k(F,D)}}if(x!==void (0)){for(w=x.length-1;w>=0;w--){if(x[w].kind==="object"){if(n(F[x[w].fieldName])){Object.freeze(F[x[w].fieldName])}}else{if(x[w].kind==="object:freeze"){e(F[x[w].fieldName])}else{if(x[w].kind==="object:deepFreeze"){l(F[x[w].fieldName])}else{if(x[w].kind!=="instance"){if(!j(F[x[w].fieldName])){F[x[w].fieldName]=[]}if(x[w].kind==="array:freeze"){e(F[x[w].fieldName])}else{if(x[w].kind==="array:deepFreeze"){l(F[x[w].fieldName])}else{Object.freeze(F[x[w].fieldName])}}}}}}}}Object.defineProperty(D,"$state",{configurable:false,enumerable:false,writable:false,value:F});return D};return q}}};f.exports=g},{"./utils":11}],7:[function(k,f,y){var g=k("./model");var i=k("./viewModel");var s=k("./controllerViewModel");var q=k("./mixin");var j=k("page");var u=k("./utils");var t=u.extend;var h=u.mixInto;var l=u.createMergedResultFunction;var v=u.createChainedFunction;var r=u.uuid;var n=function(){};var x=function(){};var o=function(){};var m;var p;var w;h(n,g.Mixin);h(x,i.Mixin);h(o,s.Mixin);var e={createClass:function(A,B,z){var E=function(){};E.prototype=new A();E.prototype.constructor=E;var D=E;var C=function(F){var G=new D();return G.construct.apply(C,arguments)};C.componentConstructor=E;E.ConvenienceConstructor=C;C.originalSpec=z;C.type=E;E.prototype.type=E;C.classType=B;E.prototype.classType=B;C.getDescriptor=function(){var P={},R=this.prototype,M={},K,V,J,L,O=false,Y,X,W={},G;if("__processedSpec__" in this.originalSpec){return this.originalSpec.__processedSpec__}var S={};var N={},T={};if("mixins" in this.originalSpec){for(var U=0;U<this.originalSpec.mixins.length;U++){X=this.originalSpec.mixins[U];for(var I in X){if(!X.hasOwnProperty(I)){continue}if(("get" in X[I]||"set" in X[I])&&!(I in this.originalSpec)){S[I]=X[I]}else{if(I.substring(0,3)==="get"){N[I]=N[I]||[];N[I].push(X[I])}else{T[I]=T[I]||[];T[I].push(X[I])}}}}for(var Q in N){if(N.hasOwnProperty(Q)){if(N[Q].length===1&&!(Q in this.originalSpec)){this.originalSpec[Q]=N[Q][0]}else{if(Q in this.originalSpec){N[Q].push(this.originalSpec[Q])}this.originalSpec[Q]=l(N[Q])}}}for(var H in T){if(T.hasOwnProperty(H)){if(T[H].length===1&&!(H in this.originalSpec)){this.originalSpec[H]=T[H][0]}else{if(H in this.originalSpec){T[H].push(this.originalSpec[H])}this.originalSpec[H]=v(T[H])}}}this.originalSpec=t(this.originalSpec,S);delete this.originalSpec.mixins}for(Y in this.originalSpec){if(this.originalSpec.hasOwnProperty(Y)){if("get" in this.originalSpec[Y]||"set" in this.originalSpec[Y]){W[Y]=t(this.originalSpec[Y]);if(!("enumerable" in W[Y])){if(R.constructor.classType==="Model"&&Y[0]==="_"){W[Y].enumerable=false;L=L||[];L.push(Y)}else{W[Y].enumerable=true}}if(R.constructor.classType==="ControllerViewModel"&&("viewModel" in W[Y])){if(Y!=="*"&&Y!=="_*"){M[Y]=W[Y].viewModel;W[Y].viewModel.originalSpec.$dataContext=(function(Z){return{kind:"pseudo",get:function(){return Z}}})(Y)}delete W[Y].viewModel;delete W[Y].set}else{if(R.constructor.classType==="Model"&&("aliasFor" in W[Y])){V=V||{};V[W[Y].aliasFor]=Y;delete W[Y].aliasFor}if(R.constructor.classType==="Model"&&("validate" in W[Y])&&Object.prototype.toString.call(W[Y].validate)==="[object Object]"){delete W[Y].validate.set;P["$"+Y+"Valid"]=W[Y].validate;G=G||[];G.push(W[Y].validate.get);delete W[Y].validate}if("kind" in W[Y]){if(W[Y].kind==="pseudo"){W[Y].enumerable=false}else{if((R.constructor.classType!=="ControllerViewModel"&&W[Y].kind==="instance")||W[Y].kind==="object"||W[Y].kind==="object:freeze"||W[Y].kind==="object:deepFreeze"||W[Y].kind==="array"||W[Y].kind==="array:freeze"||W[Y].kind==="array:deepFreeze"){K=K||[];K.push({fieldName:Y,kind:W[Y].kind})}else{if(R.constructor.classType==="ControllerViewModel"&&W[Y].kind==="static"){J=J||{};O=true;J[Y]=void (0)}else{if(R.constructor.classType==="Model"&&W[Y].kind==="uid"){}else{throw new TypeError('"'+W[Y].kind+'" is not a valid "kind" value. Please review field "'+Y+'".')}}}}delete W[Y].kind}}P[Y]=W[Y]}else{if(Y!=="getInitialState"&&Y!=="getWatchedState"&&Y!=="getRoutes"&&Y!=="getDisplays"&&Y!="getTransitions"){R[Y]=this.originalSpec[Y]}}}}if(R.constructor.classType==="ControllerViewModel"){this.originalSpec.getViewModels=function(){return M}}if(R.constructor.classType==="Model"){if(G!==void (0)){var F=G.length;if(F>0){P.$allValid={get:function(){var aa=true;for(var Z=0;Z<F;Z++){if(!!!G[Z].call(this)){aa=false;break}}return aa}}}}P.$dirty={get:function(){return this.$state.$dirty===void (0)?false:this.$state.$dirty}};R.__clientFields=function(){return L||[]}}this.originalSpec.__processedSpec__={descriptor:P,proto:R,originalSpec:this.originalSpec||{},freezeFields:K,aliases:V,statics:J,clientFields:L,hasStatic:O,viewModels:M};return this.originalSpec.__processedSpec__};return C}};m=e.createClass.bind(this,n,"Model");p=e.createClass.bind(this,x,"ViewModel");w=e.createClass.bind(this,o,"ControllerViewModel");f.exports={createModelClass:m,createMClass:m,createVMClass:p,createViewModelClass:p,createControllerViewModelClass:w,createCVMClass:w,mixin:q,extend:t,uuid:r,page:j}},{"./controllerViewModel":6,"./mixin":8,"./model":9,"./utils":11,"./viewModel":12,page:3}],8:[function(g,e,h){var m=g("./stateManager");var i;var l={ui:{initializeAppContext:function(o,n){i=new m(this,o,n)},componentWillUnmount:function(){if("sessionStorage" in window){window.sessionStorage.clear()}i.dispose()}},view:{getInitialState:function(){return{appContext:i.currentState(),containerType:"view"}},componentDidMount:function(){i.mountView(this)},componentWillUnmount:function(){i.unmountView(this)}},display:{getInitialState:function(){return{containerType:"display"}},componentDidMount:function(){this.props.appContext.cueDisplay(this)}},page:{getInitialState:function(){return{containerType:"page"}},componentDidMount:function(){this.props.appContext.cuePage(this)}},pushState:{componentDidMount:function(){this.getDOMNode().addEventListener("click",this.onclick)},componentWillUnmount:function(){this.getDOMNode().removeEventListener("click")},which:function(n){n=n||window.event;return null==n.which?n.button:n.which},sameOrigin:function(o){var n=location.protocol+"//"+location.hostname;if(location.port){n+=":"+location.port}return 0==o.indexOf(n)},onclick:function(q){if(1!=this.which(q)){return}if(q.metaKey||q.ctrlKey||q.shiftKey){return}if(q.defaultPrevented){return}var n=q.target;while(n&&"A"!=n.nodeName){n=n.parentNode}if(!n||"A"!=n.nodeName){return}var o=n.getAttribute("href");if(n.pathname==location.pathname&&(n.hash||"#"==o)){return}if(n.target){return}if(!this.sameOrigin(n.href)){return}var p=n.pathname+n.search+(n.hash||"");var r=p+n.hash;q.preventDefault();p=p.replace(Astarisx.page.base(),"");if(Astarisx.page.base()&&r==p||n.href===n.baseURI+n.search+(n.hash||"")){return}Astarisx.page.show(r)}},mediaQuery:{mediaQueryWillUpdate:function(p,n,o){i.currentState().mediaQueryWillUpdate.call(i.currentState(),p,n,o)},componentDidMount:function(){var s=document.styleSheets;var o=s.length;var r=true;var u,v,t,n;for(var q=0;q<o;q+=1){u=s[q].cssRules;v=u.length;for(var p=0;p<v;p+=1){if(u[p].constructor===CSSMediaRule){if(!!u[p].cssRules.length){n=u[p].cssRules[0].selectorText.split("#");if(n.length===2&&n[0]===".media"){t=window.matchMedia(u[p].media.mediaText);t.addListener(this.mediaQueryWillUpdate.bind(this,n[1]));if(r){this.mediaQueryWillUpdate(n[1],t,r)}else{this.mediaQueryWillUpdate(t)}}}}}}}}};var j={getInitialState:function(){return{appContext:i.currentState(),containerType:"display"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cueDisplay(this)},componentWillUnmount:function(){i.unmountView(this)}};var k={getInitialState:function(){return{appContext:i.currentState(),containerType:"page"}},componentDidMount:function(){i.mountView(this);this.state.appContext.cuePage(this)},componentWillUnmount:function(){i.unmountView(this)}};var f=l.view;Object.defineProperty(l.view,"display",{configurable:false,enumerable:false,writable:false,value:j});Object.defineProperty(l.view,"page",{configurable:false,enumerable:false,writable:false,value:k});e.exports=l},{"./stateManager":10}],9:[function(h,f,i){var m=h("./utils");var k=m.extend;var n=m.isObject;var j=m.isArray;var e=m.freeze;var l=m.deepFreeze;var g={Mixin:{construct:function(o){var q=this.getDescriptor();var p=function(u,s){var v=q.freezeFields,t,r=Object.create(q.proto,q.descriptor);u=k(u,s);if(q.aliases!==void (0)){for(var w in q.aliases){if(q.aliases.hasOwnProperty(w)&&(w in u)){u[q.aliases[w]]=u[w];delete u[w]}}}Object.defineProperty(r,"$state",{configurable:true,enumerable:false,writable:true,value:u});if("getInitialState" in q.originalSpec){u=k(u,q.originalSpec.getInitialState.call(r))}if(v!==void (0)){for(t=v.length-1;t>=0;t--){if(v[t].kind==="object"){if(n(u[v[t].fieldName])){Object.freeze(u[v[t].fieldName])}}else{if(v[t].kind==="object:freeze"){e(u[v[t].fieldName])}else{if(v[t].kind==="object:deepFreeze"){l(u[v[t].fieldName])}else{if(v[t].kind!=="instance"){if(!j(u[v[t].fieldName])){u[v[t].fieldName]=[]}if(v[t].kind==="array:freeze"){e(u[v[t].fieldName])}else{if(v[t].kind==="array:deepFreeze"){l(u[v[t].fieldName])}else{Object.freeze(u[v[t].fieldName])}}}}}}}}Object.defineProperty(r,"$state",{configurable:false,enumerable:false,writable:false,value:Object.freeze(u)});if(o){Object.defineProperty(r,"_stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(){return o})()})}return Object.freeze(r)};return p}}};f.exports=g},{"./utils":11}],10:[function(g,f,h){var k=g("page");var o=g("./utils");var j=o.extend;var m=o.updateStatic;var e=o.uuid;var i=o.isArray;var l=o.isControllerViewModel;var n;var p=function(H,L){var I=e(),Q,O,q,N,u,W,B={},F=false,C={},X,t={},S={},w,A={},y={},P,K,T,D,z,s=false,J={},V={},r,x=false,E=false,M=this;var G=H.shouldComponentUpdate===null;var U=Array.prototype.slice.call(arguments,2);M.appState={};M.listeners={};M.handlers={};M.hasListeners=false;Q=L.controllerViewModel;u="enableUndo" in L?L.enableUndo:false;W="enableRouting" in L?L.enableRouting:false;M.signInUrl=L.signInUrl;O=function(Y){H.setState({appContext:Y})};notifyViews=function(ab){var aa,Y;if(M.hasListeners){stateChangeEvent=new CustomEvent("stateChange",{detail:{appContext:M.appState,shouldUpdate:true}});passiveStateChangeEvent=new CustomEvent("stateChange",{detail:{appContext:M.appState,shouldUpdate:false}});if(ab){if(i(ab)){aa={};Y=!(ab.indexOf("*")===-1);ab.forEach(function(ae){if(ae==="*"){if(G){H.shouldComponentUpdate=function(){return true}}}else{if(ae in M.listeners){M.listeners[ae].dispatchEvent(stateChangeEvent);aa[ae]=true}}});if(!Y){if(G){H.shouldComponentUpdate=function(){return false}}}for(var Z in M.listeners){if(M.listeners.hasOwnProperty(Z)&&!!!aa[Z]){M.listeners[Z].dispatchEvent(passiveStateChangeEvent)}}aa=void (0)}else{if(ab==="*"){if(G){H.shouldComponentUpdate=function(){return true}}}else{if(G){H.shouldComponentUpdate=function(){return false}}}for(var ad in M.listeners){if(M.listeners.hasOwnProperty(ad)){if(ad===ab){M.listeners[ad].dispatchEvent(stateChangeEvent)}else{M.listeners[ad].dispatchEvent(passiveStateChangeEvent)}}}}}else{if(G){H.shouldComponentUpdate=function(){return true}}for(var ac in M.listeners){if(M.listeners.hasOwnProperty(ac)){M.listeners[ac].dispatchEvent(stateChangeEvent)}}}stateChangeEvent=void (0);passiveStateChangeEvent=void (0)}else{if(G){H.shouldComponentUpdate=function(){return true}}}O(M.appState)};var v=function(av,Y,aa,an,af,aB,Z){var aj={},ag=void (0),aC=void (0),al,aq,ax,ai,ad,aA,ak,aw,ao,az=[],ar,at,ac,ap,ab=false,ae=false,au,am;y=Z?{}:y;if(typeof an==="function"){aB=void (0);if(af!==void (0)&&!isNaN(af)){aB=af.toFixed()}af=an;if(typeof aa==="boolean"){an=aa;aa={}}else{an=true}}else{if(typeof aa==="function"){aB=void (0);if(an!==void (0)&&!isNaN(an)){aB=an.toFixed()}af=aa;aa={};an=true}else{if(typeof Y==="function"){aB=void (0);if(aa!==void (0)&&!isNaN(aa)){aB=aa.toFixed()}an=true;af=Y;Y={};aa={}}}}if(an===void (0)){an=true}Y=Y||{};al=Object.keys(Y);aq=al.length;aa=aa||{};ax=Object.keys(aa).length;if(!!!aq&&!!!ax){if(typeof af==="function"){if(!an){M.appState=new n(M.appState.$state,M.appState.$previousState,aC,u,W,false,!x||aj.$pageNotFound,an)}if(aB!==void (0)&&!isNaN(aB)){s=false;notifyViews(y.$notify);A={};y={};window.setTimeout(function(){if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}},aB)}else{s=true;if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}}}else{s=false;notifyViews(y.$notify);A={};y={}}return}if(l(Y)){ae=true;aj=j(Y,B);ag=Y.$previousState;aC=aa;for(ak in X){aj[ak]=new C[ak](aj[ak])}for(ak in X){if(X.hasOwnProperty(ak)){for(ao in t[ak]){if(t[ak].hasOwnProperty(ao)){aj[ak].$state[t[ak][ao]]=(ao in X)?j(aj[ao]):aj[ao]}}}}if(typeof af==="function"){try{aj=j(aj,{$dataContextUpdated:Y.$state.$dataContextUpdated});M.appState=new n(aj,ag,aC,u,W,aj.$path!==M.appState.$path,!x||aj.$pageNotFound,an);if(aB!==void (0)&&!isNaN(aB)){s=false;notifyViews(y.$notify);A={};y={};window.setTimeout(function(){af.call(M.appState,void (0),M.appState)},aB)}else{s=true;af.call(M.appState,void (0),M.appState)}}catch(ay){s=false;A={};y={};af(ay)}return}}else{if(F){B=m(B,Y,aa)}if(!!aq){if(av===I){aj=j(Y)}else{aj[av]=j(Y)}}if(av!==void (0)&&av in aa){var ah={};ah[av]=j(aj[av],aa[av]);A=j(aa,ah,A)}else{A=j(aa,aj,A)}aA=Object.keys(A);if(aA.length===0){if(typeof af==="function"){if(!an){M.appState=new n(M.appState.$state,M.appState.$previousState,aC,u,W,false,!x||aj.$pageNotFound,an)}if(aB!==void (0)&&!isNaN(aB)){s=false;notifyViews(y.$notify);A={};y={};window.setTimeout(function(){if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}},aB)}else{s=true;if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}return}}else{return}}ad=aA.length-1;for(ai=ad;ai>=0;ai--){if(aA[ai] in X){aj[aA[ai]]=j(M.appState[aA[ai]],A[aA[ai]]);aj[aA[ai]]=new C[aA[ai]](aj[aA[ai]])}else{aj[aA[ai]]=A[aA[ai]]}}y=j(y,aj);aj=j(M.appState,y);A={};for(ai=ad;ai>=0;ai--){if(aA[ai] in S){for(at in S[aA[ai]]){if(S[aA[ai]].hasOwnProperty(at)){if(al.indexOf(at)!==-1){ac=S[aA[ai]][at];for(ap in ac){if(ac.hasOwnProperty(ap)){if(ap in t){for(ak in t[ap]){if(t[ap].hasOwnProperty(ak)){aj[ap].$state[t[ap][ak]]=(ak in X)?j(aj[ak]):aj[ak]}if(ak in t){for(aw in t[ak]){if(t[ak].hasOwnProperty(aw)){aj[ak].$state[t[ak][aw]]=(aw in X)?j(aj[aw]):aj[aw]}}}}}A=j(A,ac[ap].call(M.appState[ap],aj[aA[ai]][at],M.appState[aA[ai]][at],at,aA[ai],aj.$path,M.appState.$path))}}}}}}}if(!!Object.keys(A).length){v(void (0),{},A,an,af,aB);return}az=Object.keys(y);ar=az.length-1;for(ai=ar;ai>=0;ai--){if(av===I&&(I in t)){if(az[ai] in t[I]){for(ak in t[I][az[ai]]){if(t[I][az[ai]].hasOwnProperty(ak)){aj[ak].$state[t[I][az[ai]][ak]]=(az[ai] in X)?j(aj[az[ai]]):aj[az[ai]]}if(ak in t){for(aw in t[ak]){if(t[ak].hasOwnProperty(aw)){aj[ak].$state[t[ak][aw]]=(aw in X)?j(aj[aw]):aj[aw]}}}}}}else{if(az[ai] in t){for(ak in t[az[ai]]){if(t[az[ai]].hasOwnProperty(ak)){aj[az[ai]].$state[t[az[ai]][ak]]=(ak in X)?j(aj[ak]):aj[ak]}if(ak in t){for(aw in t[ak]){if(t[ak].hasOwnProperty(aw)){aj[ak].$state[t[ak][aw]]=(aw in X)?j(aj[aw]):aj[aw]}}}}}}}if(M.appState.$canRevert&&s){ag=M.appState.$previousState;if(F&&M.appState.$canAdvance&&B._staticUpdated&&B._onlyStatic){aC=M.appState.$nextState}}else{if(F&&B._staticUpdated&&B._onlyStatic){if(M.appState.$canRevert){ag=M.appState}if(M.appState.$canAdvance){aC=M.appState.$nextState}}else{ag=M.appState}}}if(!!ag){Object.freeze(ag)}ab=aj.$path!==M.appState.$path;try{if(ae){aj=j(aj,{$dataContextUpdated:Y.$state.$dataContextUpdated})}else{aj=j(aj,{$dataContextUpdated:y})}M.appState=new n(aj,ag,aC,u,W,ab,!x||aj.$pageNotFound,an);Object.freeze(M.appState);Object.freeze(M.appState.$state);if(typeof af==="function"){if(aB!==void (0)&&!isNaN(aB)){s=false;notifyViews(y.$notify);A={};y={};window.setTimeout(function(){if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}},aB)}else{s=true;if(av===I){af.call(M.appState,void (0),M.appState)}else{af.call(M.appState[av],void (0),M.appState)}return}}}catch(ay){if(typeof af==="function"){s=false;A={};y={};af(ay);return}}if(W&&M.appState.$pushState){if(("$path" in M.appState)&&!x){E=true;if(ab&&!M.appState.$forceReplace){k(M.appState.$path)}else{k.replace(M.appState.$path)}}x=false}s=false;notifyViews(aj.$notify);A={};y={}};try{n=Q.call(this,v.bind(this,I));M.appState=new n(void (0),void (0),void (0),u,W)}catch(R){if(R instanceof TypeError){throw new TypeError('Please assign a ControllerViewModel to the "controllerViewModel" prop in React.renderComponent')}else{throw R}}X=M.appState.constructor.originalSpec.getViewModels();delete Object.getPrototypeOf(M.appState).getViewModels;for(w in X){if(X.hasOwnProperty(w)){C[w]=X[w].call(this,v.bind(this,w));M.appState.$state[w]=new C[w](M.appState.$state[w],true)}}for(w in X){if(X.hasOwnProperty(w)){if("getWatchedState" in M.appState[w].constructor.originalSpec){P=M.appState[w].constructor.originalSpec.getWatchedState();for(K in P){if(P.hasOwnProperty(K)){if(K in X||K in M.appState){if("alias" in P[K]){if(!(w in t)){t[w]={}}t[w][K]=P[K].alias;if(!(K in X)){if(!(I in t)){t[I]={}}if(!(w in t[I])){t[I][K]={}}t[I][K][w]=P[K].alias}}for(T in P[K].fields){if(P[K].fields.hasOwnProperty(T)){if(K in X){D={};if(!(K in S)){S[K]={}}D[T]={};D[T][w]=P[K].fields[T];S[K]=D}}}}}}}}}for(w in X){if(X.hasOwnProperty(w)){for(z in t[w]){if(t[w].hasOwnProperty(z)){M.appState[w].$state[t[w][z]]=(z in X)?j(M.appState[z]):M.appState[z]}}}}for(w in X){if(X.hasOwnProperty(w)){M.appState.$state[w]=new C[w](M.appState.$state[w]);if("getRoutes" in M.appState[w].constructor.originalSpec){J=M.appState[w].constructor.originalSpec.getRoutes();for(r in J){if(J.hasOwnProperty(r)){V[J[r].path]=J[r].handler;k(J[r].path,function(ab,aa,Y,Z){x=true;if(!E){V[aa].call(M.appState[ab],Z.params,Z.path,Y,Z,("show" in M.appState)?M.appState.show.bind(M.appState):void (0))}E=false}.bind(this,w,J[r].path,r))}}delete Object.getPrototypeOf(M.appState[w]).getRoutes}if("getDisplays" in M.appState[w].constructor.originalSpec){try{M.appState.addDisplays(M.appState[w].constructor.originalSpec.getDisplays(),w);delete Object.getPrototypeOf(M.appState[w]).getDisplays}catch(R){if(R instanceof TypeError){throw new TypeError("Please ensure that Astarisx-Animate is mixed into the ControllerViewModel.")}else{throw R}}}}}if("getDisplays" in M.appState.constructor.originalSpec){M.appState.addDisplays(M.appState.constructor.originalSpec.getDisplays());delete Object.getPrototypeOf(M.appState).getDisplays}delete Object.getPrototypeOf(M.appState).addDisplays;if("getTransitions" in M.appState.constructor.originalSpec){M.appState.addTransitions(M.appState.constructor.originalSpec.getTransitions());delete Object.getPrototypeOf(M.appState).getTransitions}delete Object.getPrototypeOf(M.appState).addTransitions;M.appState=new n(M.appState,void (0),void (0),u,W);if(W){k(function(Y){x=true;M.appState.setState({"$pageNotFound":true});E=false});E=true;k.replace(M.appState.$path);k.start({click:false,dispatch:false});x=false}F=M.appState.constructor.getDescriptor().hasStatic;if(F){B=m(M.appState.constructor.getDescriptor().statics,M.appState.$state)}Object.freeze(M.appState.$state);Object.freeze(M.appState);O(M.appState);if("dataContextWillInitialize" in M.appState.constructor.originalSpec){M.appState.constructor.originalSpec.dataContextWillInitialize.apply(M.appState,U);delete Object.getPrototypeOf(M.appState).dataContextWillInitialize}};p.prototype.currentState=function(){return this.appState};p.prototype.unmountView=function(q){var r=q.props.$viewKey||q._rootNodeID;if(this.listeners===null||this.listeners===void (0)){this.handlers=null;this.hasListeners=false;return}this.listeners[r].removeEventListener("stateChange",this.handlers[r]);delete this.listeners[r];delete this.handlers[r];if(!!!Object.keys(this.listeners).length){this.hasListeners=false}};p.prototype.mountView=function(r){var t=r.props.$viewKey||r._rootNodeID;var s=r.getDOMNode();var q=true;if(r.shouldComponentUpdate===null){r.shouldComponentUpdate=function(){var u=q;q=false;return u}}this.handlers[t]=function(u){q=u.detail.shouldUpdate===void (0)?true:u.detail.shouldUpdate;r.setState({appContext:u.detail.appContext})};this.listeners[t]=!!s?s:document.createElement("div");this.listeners[t].addEventListener("stateChange",this.handlers[t]);this.hasListeners=true};p.prototype.dispose=function(){var r=new n(void (0),void (0),void (0),false,false);var q={};var s=this.appState.constructor.originalSpec.getViewModels();if(!!this.signInUrl){k.replace(this.signInUrl)}if("resetDisplay" in this.appState){this.appState.resetDisplay()}for(var t in this.listeners){if(this.listeners.hasOwnProperty(t)){this.listeners[t].removeEventListener("stateChange",this.handlers[t])}}for(viewModel in s){if(s.hasOwnProperty(viewModel)){q[viewModel]=this.appState[viewModel].__dispose()}}q=j(this.appState,r,q);try{this.appState=new n(q,void (0),void (0),false,false)}catch(u){if(u instanceof TypeError){throw new TypeError("Something went wrong")}else{throw u}}delete this.appState.constructor.originalSpec.__processedSpec__;for(viewModel in s){if(s.hasOwnProperty(viewModel)){delete this.appState[viewModel].constructor.originalSpec.__processedSpec__}}this.listeners=null;this.handlers=null;this.hasListeners=false};f.exports=p},{"./utils":11,page:3}],11:[function(g,h,f){var i=Object.prototype.toString;var e={extend:function(){var j={};for(var l=0;l<arguments.length;l++){var m=arguments[l];if(typeof m==="function"){m=m.call(this)}for(var k in m){if(m.hasOwnProperty(k)){j[k]=m[k]}}if(e.isObject(m)&&e.isModel(m)&&("__clientFields" in m)){m.__clientFields().forEach(function(n){j[n]=m[n]})}}return j},updateStatic:function(){var j={};Object.defineProperty(j,"_onlyStatic",{configurable:false,enumerable:false,writable:true,value:true});Object.defineProperty(j,"_staticUpdated",{configurable:false,enumerable:false,writable:true,value:false});for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)&&k in arguments[0]){if(k in arguments[0]){j[k]=m[k];if(l>0){j._staticUpdated=true}}else{j._onlyStatic=false}}}}return j},mixInto:function(k,l){var j;for(j in l){if(!l.hasOwnProperty(j)){continue}k.prototype[j]=l[j]}},createMergedResultFunction:function(j){return function k(){return e.extend.apply(this,j)}},createChainedFunction:function(j){return function k(){for(var l=0;l<j.length;l++){j[l].apply(this,arguments)}}},uuid:function(){var j,l;var k="";for(j=0;j<32;j++){l=Math.random()*16|0;if(j===8||j===12||j===16||j===20){k+="-"}k+=(j===12?4:(j===16?(l&3|8):l)).toString(16)}return k},isObject:function(j){return i.call(j)==="[object Object]"},isArray:function(j){return i.call(j)==="[object Array]"},isModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="Model"},isViewModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="ViewModel"},isControllerViewModel:function(j){if(!e.isObject(j)){return false}return Object.getPrototypeOf(j).constructor.classType==="ControllerViewModel"},freeze:function(m){if(e.isObject(m)){if(!Object.isFrozen(m)){Object.freeze(m)}for(var j in m){if(m.hasOwnProperty(j)){if(e.isArray(m[j])||e.isObject(m[j])){Object.freeze(m[j])}}}}else{if(e.isArray(m)){if(!Object.isFrozen(m)){Object.freeze(m)}for(var l=m.length-1;l>=0;l--){if(e.isArray(m[l])||e.isObject(m[l])){if(!Object.isFrozen(m[l])){Object.freeze(m[l])}}}}}},deepFreeze:function(n){if(e.isObject(n)){if(!Object.isFrozen(n)){Object.freeze(n)}for(var l in n){if(n.hasOwnProperty(l)){if(e.isArray(n[l])||e.isObject(n[l])){e.deepFreeze(n[l])}}}}else{if(e.isArray(n)){if(!Object.isFrozen(n)){Object.freeze(n)}for(var m=0,j=n.length;m<j;m++){if(e.isArray(n[m])||e.isObject(n[m])){e.deepFreeze(n[m])}}}}}};h.exports=e},{}],12:[function(g,f,i){var m=g("./utils");var k=m.extend;var n=m.isObject;var h=m.isModel;var j=m.isArray;var e=m.freeze;var l=m.deepFreeze;var o={Mixin:{construct:function(q){var r=this.getDescriptor();r.proto.setState=q;var p=function(E,w){E=E||{};E=("$state" in E?E.$state:E);var s=r.freezeFields,t,B=Object.create(r.proto,r.descriptor),D,x,A;Object.defineProperty(B,"$state",{configurable:true,enumerable:false,writable:true,value:E});if(w){E=("getInitialState" in r.originalSpec)?k(E,r.originalSpec.getInitialState.call(B)):E;Object.defineProperty(B,"$state",{configurable:true,enumerable:false,writable:true,value:E})}if(s!==void (0)){for(t=s.length-1;t>=0;t--){if(s[t].kind==="instance"){if(h(B[s[t].fieldName])){var C=B[s[t].fieldName].constructor;D=C.getDescriptor();A=Object.create(D.proto,D.descriptor);Object.defineProperty(A,"_stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(F){return B[F]._stateChangeHandler})(s[t].fieldName)});Object.defineProperty(A,"$state",{configurable:true,enumerable:false,writable:true,value:B[s[t].fieldName].$state});Object.getPrototypeOf(A).setState=function(J,I,K){var F={};var H;if(typeof I==="function"){K=I;I=void (0)}else{if(typeof J==="function"){K=J;J=void (0);I=void (0)}}if(J!==void (0)&&!!Object.keys(J).length){F.$dirty=true}else{F.$dirty=A.$dirty}if(D.clientFields!==void (0)){for(var G=D.clientFields.length-1;G>=0;G--){F[D.clientFields[G]]=this[D.clientFields[G]]}}H=k(this.$state,F,J);if(K&&(typeof K==="function")){K=K.bind(new C(this._stateChangeHandler)(H))}this._stateChangeHandler.call(B,H,I,K)};if(!!D.freezeFields&&!!D.freezeFields.length){for(var v=D.freezeFields.length-1;v>=0;v--){if(D.freezeFields[v].kind==="instance"&&h(B[s[t].fieldName][D.freezeFields[v].fieldName])){var y=B[s[t].fieldName][D.freezeFields[v].fieldName].constructor;var u=y.getDescriptor();var z=Object.create(u.proto,u.descriptor);Object.defineProperty(z,"_stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:A._stateChangeHandler});Object.defineProperty(z,"$state",{configurable:true,enumerable:false,writable:true,value:A[D.freezeFields[v].fieldName].$state});Object.getPrototypeOf(z).setState=(function(F){return function(L,K,M){var I={};var H;var G={};F=("$owner" in this.$state)?this.$state.$owner:F;if(typeof K==="function"){M=K;K=void (0)}else{if(typeof L==="function"){M=L;L=void (0);K=void (0)}}if(L!==void (0)&&!!Object.keys(L).length){I.$dirty=true}else{I.$dirty=z.$dirty}if(u.clientFields!==void (0)){for(var J=u.clientFields.length-1;J>=0;J--){I[u.clientFields[J]]=this[u.clientFields[J]]}}G[F]=k(this.$state,I,L);H=k(A,G);if(M&&(typeof M==="function")){M=M.bind(new y(A._stateChangeHandler)(G[F]))}A._stateChangeHandler.call(B,H,K,M)}})(D.freezeFields[v].fieldName);Object.freeze(B[s[t].fieldName][D.freezeFields[v].fieldName])}}}Object.freeze(B[s[t].fieldName])}}else{if(s[t].kind==="object"){if(n(E[s[t].fieldName])){Object.freeze(E[s[t].fieldName])}}else{if(s[t].kind==="object:freeze"){e(E[s[t].fieldName])}else{if(s[t].kind==="object:deepFreeze"){l(E[s[t].fieldName])}else{if(!j(E[s[t].fieldName])){E[s[t].fieldName]=[]}if(s[t].kind==="array:freeze"){e(E[s[t].fieldName])}else{if(s[t].kind==="array:deepFreeze"){l(E[s[t].fieldName])}else{Object.freeze(E[s[t].fieldName])}}}}}}}}Object.defineProperty(B,"$state",{configurable:false,enumerable:false,writable:false,value:E});return Object.freeze(B)};r.proto.__dispose=function(){return p(void (0))};return p}}};f.exports=o},{"./utils":11}]},{},[1])(1)});