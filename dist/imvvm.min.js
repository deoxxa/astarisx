!function(b){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=b()}else{if("function"==typeof define&&define.amd){define([],b)}else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self),a.IMVVM=b()}}}(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(g,h,f){var e=g("./src/core.js");h.exports=e},{"./src/core.js":4}],2:[function(f,g,e){(function(){var o=true;var h="";var l;function p(w,v){if("function"==typeof w){return p("*",w)}if("function"==typeof v){var t=new m(w);for(var u=1;u<arguments.length;++u){p.callbacks.push(t.middleware(arguments[u]))}}else{if("string"==typeof w){p.show(w,v)}else{p.start(w)}}}p.callbacks=[];p.base=function(t){if(0==arguments.length){return h}h=t};p.start=function(u){u=u||{};if(l){return}l=true;if(false===u.dispatch){o=false}if(false!==u.popstate){window.addEventListener("popstate",q,false)}if(false!==u.click){window.addEventListener("click",s,false)}if(!o){return}var t=location.pathname+location.search+location.hash;p.replace(t,null,true,o)};p.stop=function(){l=false;removeEventListener("click",s,false);removeEventListener("popstate",q,false)};p.show=function(w,v,u){var t=new r(w,v);if(false!==u){p.dispatch(t)}if(!t.unhandled){t.pushState()}return t};p.replace=function(w,v,x,u){var t=new r(w,v);t.init=x;if(null==u){u=true}if(u){p.dispatch(t)}t.save();return t};p.dispatch=function(t){var u=0;function v(){var w=p.callbacks[u++];if(!w){return j(t)}w(t,v)}v()};function j(t){var u=window.location.pathname+window.location.search;if(u==t.canonicalPath){return}p.stop();t.unhandled=true;window.location=t.canonicalPath}function r(w,u){if("/"==w[0]&&0!=w.indexOf(h)){w=h+w}var t=w.indexOf("?");this.canonicalPath=w;this.path=w.replace(h,"")||"/";this.title=document.title;this.state=u||{};this.state.path=w;this.querystring=~t?w.slice(t+1):"";this.pathname=~t?w.slice(0,t):w;this.params=[];this.hash="";if(!~this.path.indexOf("#")){return}var v=this.path.split("#");this.path=v[0];this.hash=v[1]||"";this.querystring=this.querystring.split("#")[0]}p.Context=r;r.prototype.pushState=function(){history.pushState(this.state,this.title,this.canonicalPath)};r.prototype.save=function(){history.replaceState(this.state,this.title,this.canonicalPath)};function m(u,t){t=t||{};this.path=u;this.method="GET";this.regexp=n(u,this.keys=[],t.sensitive,t.strict)}p.Route=m;m.prototype.middleware=function(u){var t=this;return function(v,w){if(t.match(v.path,v.params)){return u(v,w)}w()}};m.prototype.match=function(B,w){var A=this.keys,C=B.indexOf("?"),t=~C?B.slice(0,C):B,v=this.regexp.exec(t);if(!v){return false}for(var x=1,y=v.length;x<y;++x){var z=A[x-1];var u="string"==typeof v[x]?decodeURIComponent(v[x]):v[x];if(z){w[z.name]=undefined!==w[z.name]?w[z.name]:u}else{w.push(u)}}return true};function n(w,v,u,t){if(w instanceof RegExp){return w}if(w instanceof Array){w="("+w.join("|")+")"}w=w.concat(t?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(z,B,C,A,x,y){v.push({name:A,optional:!!y});B=B||"";return""+(y?"":B)+"(?:"+(y?B:"")+(C||"")+(x||(C&&"([^/.]+?)"||"([^/]+?)"))+")"+(y||"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)");return new RegExp("^"+w+"$",u?"":"i")}function q(u){if(u.state){var t=u.state.path;p.replace(t,u.state)}}function s(w){if(1!=i(w)){return}if(w.metaKey||w.ctrlKey||w.shiftKey){return}if(w.defaultPrevented){return}var t=w.target;while(t&&"A"!=t.nodeName){t=t.parentNode}if(!t||"A"!=t.nodeName){return}var u=t.getAttribute("href");if(t.pathname==location.pathname&&(t.hash||"#"==u)){return}if(t.target){return}if(!k(t.href)){return}var v=t.pathname+t.search+(t.hash||"");var x=v+t.hash;v=v.replace(h,"");if(h&&x==v){return}w.preventDefault();p.show(x)}function i(t){t=t||window.event;return null==t.which?t.button:t.which}function k(u){var t=location.protocol+"//"+location.hostname;if(location.port){t+=":"+location.port}return 0==u.indexOf(t)}if("undefined"==typeof g){window.page=p}else{g.exports=p}})()},{}],3:[function(g,h,f){var e=g("./utils");var j=e.extend;var i={Mixin:{construct:function(m,l){var o=false;var k=false;var p=this.getDescriptor();p.proto.setState=m;p.proto.revert=function(){this.setState(this.previousState,!!this.previousState?this:void (0))};p.proto.advance=function(){if(this.canAdvance){this.setState(this.nextState,this.nextState.nextState)}};var n=function(C,z,w,s,D,x,y,r){var v=p.freezeFields,A=Object.create(p.proto,p.descriptor),u,B=C===void (0),q,t;x=D?x:false;if(!B){if(D){t=C.pageNotFound===void (0)?false:C.pageNotFound;Object.defineProperty(A,"pageNotFound",{configurable:false,enumerable:false,writable:false,value:t});Object.defineProperty(A,"forceReplace",{configurable:false,enumerable:false,writable:false,value:C.forceReplace===void (0)?false:C.forceReplace});Object.defineProperty(A,"pushState",{configurable:false,enumerable:true,writable:false,value:C.pushState===void (0)?true:C.pushState});if(!("path" in A)&&("path" in C)){Object.defineProperty(A,"path",{configurable:false,enumerable:true,writable:false,value:C.path})}}if(C.enableUndo===void (0)){q=false}else{s=C.enableUndo;q=C.enableUndo;if(!C.enableUndo){D=false}}}if(s||D){if(!!z&&(!x||q||t)&&!previousAdhoc&&y&&!r){previousAdhoc=q;k=t;Object.defineProperty(A,"previousState",{configurable:false,enumerable:false,writable:false,value:z});Object.defineProperty(A,"canRevert",{configurable:false,enumerable:false,writable:false,value:true})}else{Object.defineProperty(A,"canRevert",{configurable:false,enumerable:false,writable:false,value:false})}if(!!w&&("state" in w)&&!previousAdhoc&&!k){Object.defineProperty(A,"nextState",{configurable:false,enumerable:false,writable:false,value:w});Object.defineProperty(A,"canAdvance",{configurable:false,enumerable:false,writable:false,value:true})}else{previousAdhoc=q;k=t;Object.defineProperty(A,"canAdvance",{configurable:false,enumerable:false,writable:false,value:false})}}if(B){C=("getInitialState" in p.originalSpec)?p.originalSpec.getInitialState.call(A):{};if(D){Object.defineProperty(A,"path",{configurable:false,enumerable:true,writable:false,value:C.path||"/"})}}else{if("state" in C){delete C.state;Object.defineProperty(A,"state",{configurable:true,enumerable:false,writable:true,value:C});C=j(C,A)}}for(u=v.length-1;u>=0;u--){if(v[u].kind==="array"){C[v[u].fieldName]=C[v[u].fieldName]||[];Object.freeze(C[v[u].fieldName])}else{throw new TypeError('kind:"instance" can only be specified in a ViewModel.')}}Object.defineProperty(A,"state",{configurable:false,enumerable:false,writable:false,value:C});return A};return n}}};h.exports=i},{"./utils":8}],4:[function(j,e,v){var f=j("./model");var h=j("./viewModel");var q=j("./controllerViewModel");var p=j("./mixin");var i=j("page");var s=j("./utils");var r=s.extend;var g=s.mixInto;var m=function(){};var u=function(){};var n=function(){};var l;var o;var t;g(m,f.Mixin);g(u,h.Mixin);g(n,q.Mixin);var k={createClass:function(x,y,w){var B=function(){};B.prototype=new x();B.prototype.constructor=B;var A=B;var z=function(C){var D=new A();return D.construct.apply(z,arguments)};z.componentConstructor=B;B.ConvenienceConstructor=z;z.originalSpec=w;z.type=B;B.prototype.type=B;z.classType=y;B.prototype.classType=y;z.getDescriptor=function(){var D={},J=this.prototype,K={},E=[],F={},L={},H=false,N,G;if("__processedSpec__" in this.originalSpec){return this.originalSpec.__processedSpec__}if("mixins" in this.originalSpec&&J.constructor.classType==="ControllerViewModel"){for(var I=0;I<this.originalSpec.mixins.length;I++){G=this.originalSpec.mixins[I];for(var C in G){var M=G[C];if(!G.hasOwnProperty(C)){continue}this.originalSpec[C]=M}}delete this.originalSpec.mixins}for(N in this.originalSpec){if(this.originalSpec.hasOwnProperty(N)){if("get" in this.originalSpec[N]||"set" in this.originalSpec[N]){this.originalSpec[N].enumerable=true;if("viewModel" in this.originalSpec[N]&&J.constructor.classType==="ControllerViewModel"){K[N]=this.originalSpec[N].viewModel;delete this.originalSpec[N].viewModel;delete this.originalSpec[N].set}else{if("aliasFor" in this.originalSpec[N]&&J.constructor.classType==="Model"){F[this.originalSpec[N].aliasFor]=N;delete this.originalSpec[N].aliasFor}if("kind" in this.originalSpec[N]){if(this.originalSpec[N].kind==="pseudo"){this.originalSpec[N].enumerable=false}else{if((this.originalSpec[N].kind==="instance"&&J.constructor.classType==="ViewModel")||this.originalSpec[N].kind==="array"){E.push({fieldName:N,kind:this.originalSpec[N].kind})}else{if(this.originalSpec[N].kind==="static"&&J.constructor.classType==="ControllerViewModel"){H=true;L[N]=void (0)}else{if(this.originalSpec[N].kind==="uid"&&J.constructor.classType==="Model"){}else{throw new TypeError('"'+this.originalSpec[N].kind+'" is not a valid "kind" value. Please review field "'+N+'".')}}}}delete this.originalSpec[N].kind}}D[N]=this.originalSpec[N]}else{if(N!=="getInitialState"&&N!=="getWatchedState"&&N!=="getRoutes"&&N!=="getViews"&&N!="getDefaultTransitions"){J[N]=this.originalSpec[N]}}}}if(J.constructor.classType==="ControllerViewModel"&&!!Object.keys(K).length){this.originalSpec.getViewModels=function(){return K}}this.originalSpec.__processedSpec__={descriptor:D,proto:J,originalSpec:this.originalSpec||{},freezeFields:E,aliases:F,statics:L,hasStatic:H};return this.originalSpec.__processedSpec__};return z}};l=k.createClass.bind(this,m,"Model");o=k.createClass.bind(this,u,"ViewModel");t=k.createClass.bind(this,n,"ControllerViewModel");e.exports={createModel:l,createModelClass:l,createMClass:l,createViewModel:o,createVMClass:o,createViewModelClass:o,createDomainViewModel:t,createControllerViewModelClass:t,createCVMClass:t,mixin:p,extend:r,page:i,getView:q.getView,getTransition:q.getTransition}},{"./controllerViewModel":3,"./mixin":5,"./model":6,"./utils":8,"./viewModel":9,page:2}],5:[function(g,i,f){var h=g("./stateController");var e={main:{getInitialState:function(){var l;var k=false;var j=false;if("enableUndo" in this.props){k=this.props.enableUndo}if("enableRouting" in this.props){j=this.props.enableRouting}l=h.initAppState(this,k,j);return{appContext:l}}},view:{getInitialState:function(){return{appContext:h.initViewState()}},componentDidMount:function(){h.initViewState(this)},componentWillUnmount:function(){h.unmountView(this)}},pushState:{componentDidMount:function(){this.getDOMNode().addEventListener("click",this.onclick)},componentWillUnmount:function(){this.getDOMNode().removeEventListener("click")},which:function(j){j=j||window.event;return null==j.which?j.button:j.which},sameOrigin:function(k){var j=location.protocol+"//"+location.hostname;if(location.port){j+=":"+location.port}return 0==k.indexOf(j)},onclick:function(m){if(1!=this.which(m)){return}if(m.metaKey||m.ctrlKey||m.shiftKey){return}if(m.defaultPrevented){return}var j=m.target;while(j&&"A"!=j.nodeName){j=j.parentNode}if(!j||"A"!=j.nodeName){return}var k=j.getAttribute("href");if(j.pathname==location.pathname&&(j.hash||"#"==k)){return}if(j.target){return}if(!this.sameOrigin(j.href)){return}var l=j.pathname+j.search+(j.hash||"");var n=l+j.hash;m.preventDefault();l=l.replace(IMVVM.page.base(),"");if(IMVVM.page.base()&&n==l||j.href===j.baseURI+j.search+(j.hash||"")){return}IMVVM.page.show(n)}},mediaQuery:{closureFunc:function(l,j,k){(function(){this.state.appContext.mediaChangeHandler.call(this.state.appContext,l,j,k)}.bind(this))()},componentDidMount:function(){var p=document.styleSheets;var l=p.length;var o=true;var r,s,q,k;for(var n=0;n<l;n+=1){r=p[n].cssRules;s=r.length;for(var m=0;m<s;m+=1){if(r[m].constructor===CSSMediaRule){if(!!r[m].cssRules.length){k=r[m].cssRules[0].selectorText.split("#");if(k.length===2&&k[0]===".media"){q=window.matchMedia(r[m].media.mediaText);q.addListener(this.closureFunc.bind(this,k[1]));if(o){this.closureFunc(k[1],q,o)}else{this.closureFunc(q)}}}}}}}}};i.exports=e},{"./stateController":7}],6:[function(g,h,f){var e=g("./utils");var j=e.extend;var i={Mixin:{construct:function(k){var m=this.getDescriptor();var l=function(r,p,n){var s=m.freezeFields,q,o=Object.create(m.proto,m.descriptor);if(r===void (0)){n=true}else{if(typeof r==="boolean"){n=r;r=void (0)}else{if(typeof p==="boolean"){n=p;p=void (0)}}}r=j(r,p);Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:r});r=j(r,o);if(n){for(var t in m.aliases){if(m.aliases.hasOwnProperty(t)&&t in r){r[m.aliases[t]]=r[t];delete r[t]}}Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:r});r=j(r,o);if("getInitialState" in m.originalSpec){r=j(r,m.originalSpec.getInitialState.call(o))}}for(q=s.length-1;q>=0;q--){if(s[q].kind==="array"){r[s[q].fieldName]=r[s[q].fieldName]||[];Object.freeze(r[s[q].fieldName])}else{throw new TypeError('kind:"instance" can only be specified in a ViewModel.')}}Object.defineProperty(o,"state",{configurable:false,enumerable:false,writable:false,value:r});Object.defineProperty(o,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(){return k})()});return Object.freeze(o)};return l}}};h.exports=i},{"./utils":8}],7:[function(g,f,h){var k=g("page");var o=g("./utils");var j=o.extend;var m=o.updateStatic;var l="__IMVVM__";var i,e;var n=(function(u){var U,I={},v=false,D={},J=false,E={},W,t={},R={},w,C={},A={},Q,M,S,F,B,s=false,L={},T={},r,x=false,O={},p={},K,q="Application",y,z=false,H=false,P;var N={},G=false;var V=function(X){this.setState({appContext:X.detail})};e=function(X){N[X._rootNodeID].removeEventListener("stateChange");delete N[X._rootNodeID];if(!!!Object.keys(N).length){G=false}};i=function(Y,ac,aa){var Z;if(!v){v=true;Z=function(ad){Y.setState({appContext:ad})}}else{if(Y!==void (0)){N[Y._rootNodeID]=Y.getDOMNode();N[Y._rootNodeID].addEventListener("stateChange",V.bind(Y));G=true;return}return I}P=Y.props.controllerViewModel;var X=function(aw,ad,ae,ax,aj,aA){var am={},ak=void (0),aB=void (0),ao,al,ah,an,ap,az=[],ar,at,ag,aq,af=false,ai=false;if(arguments.length<2){ad=I}if(typeof ax==="function"){aA=aj;aj=ax;ax=false}else{if(typeof ae==="function"){aA=ax;aj=ae;ae={}}else{if(typeof ae==="boolean"){ax=ae;ae={}}}}if(ax===void (0)){ax=false}ad=ad||{};ao=Object.keys(ad);if(Object.getPrototypeOf(ad).constructor.classType==="ControllerViewModel"){ai=true;am=j(ad,D);ak=ad.previousState;aB=ae;for(an in W){am[an]=new E[an](am[an])}for(an in W){if(W.hasOwnProperty(an)){for(ap in t[an]){if(t[an].hasOwnProperty(ap)){am[an].state[t[an][ap]]=(ap in W)?j(am[ap].state):am[ap]}}}}if(typeof aj==="function"){try{I=new U(am,ak,aB,ac,aa,am.path!==I.path,!z||am.pageNotFound,ax);s=true;if(!!aA){window.setTimeout(function(){aj(void (0),I)},aA)}else{aj(void (0),I)}}catch(ay){aj(ay)}return}}else{if(J){D=m(D,ad)}if(!!ao.length){if(aw===u){am=j(ad)}else{am[aw]=j(ad)}}C=j(am,C,ae);transientStateKeys=Object.keys(C);if(transientStateKeys.length===0){return}ah=transientStateKeys.length-1;for(al=ah;al>=0;al--){if(transientStateKeys[al] in W){am[transientStateKeys[al]]=j(I[transientStateKeys[al]],C[transientStateKeys[al]]);am[transientStateKeys[al]]=new E[transientStateKeys[al]](am[transientStateKeys[al]])}else{am[transientStateKeys[al]]=C[transientStateKeys[al]]}}A=j(A,am);am=j(I,A);C={};for(al=ah;al>=0;al--){if(transientStateKeys[al] in R){for(at in R[transientStateKeys[al]]){if(R[transientStateKeys[al]].hasOwnProperty(at)){if(ao.indexOf(at)!==-1){ag=R[transientStateKeys[al]][at];for(aq in ag){if(ag.hasOwnProperty(aq)){if(aq in t){for(an in t[aq]){if(t[aq].hasOwnProperty(an)){am[aq].state[t[aq][an]]=(an in W)?j(am[an].state):am[an]}if(an in t){for(dataContext2 in t[an]){if(t[an].hasOwnProperty(dataContext2)){am[an].state[t[an][dataContext2]]=(dataContext2 in W)?j(am[dataContext2].state):am[dataContext2]}}}}}C=j(C,ag[aq].call(I[aq],am[transientStateKeys[al]][at],I[transientStateKeys[al]][at],at,transientStateKeys[al],am.path,I.path))}}}}}}}if(!!Object.keys(C).length){X(void (0),{},C,ax,aj,aA);return}az=Object.keys(A);ar=az.length-1;for(al=ar;al>=0;al--){if(aw===u&&(u in t)){if(az[al] in t[u]){for(an in t[u][az[al]]){if(t[u][az[al]].hasOwnProperty(an)){am[an].state[t[u][az[al]][an]]=am[az[al]]}if(an in t){for(dataContext2 in t[an]){if(t[an].hasOwnProperty(dataContext2)){am[an].state[t[an][dataContext2]]=(dataContext2 in W)?j(am[dataContext2].state):am[dataContext2]}}}}}}else{if(az[al] in t){for(an in t[az[al]]){if(t[az[al]].hasOwnProperty(an)){am[az[al]].state[t[az[al]][an]]=am[an]}if(an in t){for(dataContext2 in t[an]){if(t[an].hasOwnProperty(dataContext2)){am[an].state[t[an][dataContext2]]=am[dataContext2]}}}}}}}if(I.canRevert&&s){ak=I.previousState}else{if(J&&D._staticUpdated&&D._onlyStatic){if(I.canRevert){ak=I.previousState}if(I.canAdvance){aB=I.nextState}}else{ak=I}}}if(!!ak){Object.freeze(ak)}af=am.path!==I.path;try{if(ai){am=j(am,{dataContextWillUpdate:ad.state.dataContextWillUpdate})}else{am=j(am,{dataContextWillUpdate:A})}I=new U(am,ak,aB,ac,aa,af,!z||am.pageNotFound,ax);Object.freeze(I);Object.freeze(I.state);if(typeof aj==="function"){s=true;if(!!aA){window.setTimeout(function(){aj(void (0),I)},aA)}else{aj(void (0),I);return}}}catch(ay){if(typeof aj==="function"){aj(ay);return}}s=false;C={};A={};Z(I);if(G){var au=new CustomEvent("stateChange",{detail:I});for(var av in N){if(N.hasOwnProperty(av)){N[av].dispatchEvent(au)}}}if(aa&&I.pushState){if(("path" in I)&&!z){H=true;if(af&&!I.forceReplace){k(I.path)}else{k.replace(I.path)}}z=false}};try{U=P.call(this,X.bind(this,u));I=new U(void (0),void (0),void (0),ac,aa);I.state=I.state||{}}catch(ab){if(ab instanceof TypeError){throw new TypeError('Please assign a ControllerViewModel to the "controllerViewModel" prop in React.renderComponent')}else{throw ab}}W=I.constructor.originalSpec.getViewModels();delete I.constructor.originalSpec.getViewModels;for(w in W){if(W.hasOwnProperty(w)){E[w]=W[w].call(this,X.bind(this,w));I.state[w]=new E[w](I.state[w],true)}}for(w in W){if(W.hasOwnProperty(w)){if("getWatchedState" in I[w].constructor.originalSpec){Q=I[w].constructor.originalSpec.getWatchedState();for(M in Q){if(Q.hasOwnProperty(M)){if(M in W||M in I){if("alias" in Q[M]){if(!(w in t)){t[w]={}}t[w][M]=Q[M].alias;if(!(M in W)){if(!(u in t)){t[u]={}}if(!(w in t[u])){t[u][M]={}}t[u][M][w]=Q[M].alias}}for(S in Q[M].fields){if(Q[M].fields.hasOwnProperty(S)){if(M in W){F={};if(!(M in R)){R[M]={}}F[S]={};F[S][w]=Q[M].fields[S];R[M]=F}}}}}}}}}for(w in W){if(W.hasOwnProperty(w)){for(B in t[w]){if(t[w].hasOwnProperty(B)){I[w].state[t[w][B]]=I[B]}}}}for(w in W){if(W.hasOwnProperty(w)){I.state[w]=new E[w](I.state[w]);if("getRoutes" in I[w].constructor.originalSpec){L=I[w].constructor.originalSpec.getRoutes();for(r in L){if(L.hasOwnProperty(r)){T[L[r].path]=L[r].handler;k(L[r].path,function(ag,af,ad,ae){z=true;if(!H){if(I.canRevert&&I.pageNotFound){ae.rollbackRequest=true;ae.revert=function(){this.revert.bind(this);this.setState({},{path:ae.path})}.bind(I)}T[af].call(I[ag],ae.params,ae.path,ad,ae,I.transitionTo.bind(I))}H=false}.bind(this,w,L[r].path,r))}}delete I[w].constructor.originalSpec.getRoutes}if("getViews" in I[w].constructor.originalSpec){x=true;O=I[w].constructor.originalSpec.getViews();for(K in O){if(O.hasOwnProperty(K)){y=("path" in O[K])?O[K].path:void (0);p[(O[K].viewDisplay||w)+"."+K]={viewKey:(O[K].viewDisplay||w)+"."+K,viewContext:w,viewDisplay:(O[K].viewDisplay||w),viewName:K,component:O[K].component,viewPath:("path" in O[K])?O[K].path:void (0),pathIsFunc:(y&&typeof y==="function"),displayIn:O[K].displayIn,displayOut:O[K].displayOut,itemIn:O[K].itemIn,itemOut:O[K].itemOut}}}delete I[w].constructor.originalSpec.getViews}}}if("getViews" in I.constructor.originalSpec){x=true;O=I.constructor.originalSpec.getViews();for(K in O){if(O.hasOwnProperty(K)){y=("path" in O[K])?O[K].path:void (0);p[(O[K].viewDisplay||q)+"."+K]={viewKey:(O[K].viewDisplay||q)+"."+K,viewDisplay:(O[K].viewDisplay||q),viewName:K,component:O[K].component,viewPath:("path" in O[K])?O[K].path:void (0),pathIsFunc:(y&&typeof y==="function"),displayIn:O[K].displayIn,displayOut:O[K].displayOut,itemIn:O[K].itemIn,itemOut:O[K].itemOut}}}delete I.constructor.originalSpec.getViews}if(x){I.addViews(p);p=void (0)}delete I.__proto__.addViews;if("getDefaultTransitions" in I.constructor.originalSpec){I.addTransitions(I.constructor.originalSpec.getDefaultTransitions());delete I.constructor.originalSpec.getDefaultTransitions}delete I.__proto__.addTransitions;I=new U(I,void (0),void (0),ac,aa);if(aa){k(function(ad){z=true;I.setState({pageNotFound:true});H=false});H=true;k.replace(I.path);k.start({click:false,dispatch:false});z=false}J=I.constructor.originalSpec.__processedSpec__.hasStatic;if(J){D=m(I.constructor.originalSpec.__processedSpec__.statics,I.state)}if("dataContextWillInitialize" in I.constructor.originalSpec){I.constructor.originalSpec.dataContextWillInitialize.call(I);delete I.constructor.originalSpec.dataContextWillInitialize}for(w in W){if(W.hasOwnProperty(w)){if("dataContextWillInitialize" in I[w].constructor.originalSpec){I[w].constructor.originalSpec.dataContextWillInitialize.call(I[w]);delete I[w].constructor.originalSpec.dataContextWillInitialize}}}Object.freeze(I.state);Object.freeze(I);return I};return i})(l);f.exports={initAppState:n,initViewState:i,unmountView:e}},{"./utils":8,page:2}],8:[function(g,h,f){var e={extend:function(){var j={};for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)){j[k]=m[k]}}}return j},updateStatic:function(){var j={};Object.defineProperty(j,"_onlyStatic",{configurable:false,enumerable:false,writable:true,value:true});Object.defineProperty(j,"_staticUpdated",{configurable:false,enumerable:false,writable:true,value:false});for(var l=0;l<arguments.length;l++){var m=arguments[l];for(var k in m){if(m.hasOwnProperty(k)&&k in arguments[0]){if(k in arguments[0]){j[k]=m[k];if(l>0){j._staticUpdated=true}}else{j._onlyStatic=false}}}}return j},mixInto:function(j,k){var i;for(i in k){if(!k.hasOwnProperty(i)){continue}j.prototype[i]=k[i]}}};h.exports=e},{}],9:[function(h,i,f){var e=h("./utils");var j=e.extend;var g={Mixin:{construct:function(l){var m=this.getDescriptor(this);m.proto.setState=l;var k=function(r,n){r=r||{};r=("state" in r?r.state:r);var s=m.freezeFields,q,p=Object.create(m.proto,m.descriptor),t,o;Object.defineProperty(p,"state",{configurable:true,enumerable:false,writable:true,value:r});if(n){r=("getInitialState" in m.originalSpec)?j(r,m.originalSpec.getInitialState.call(p)):r;Object.defineProperty(p,"state",{configurable:true,enumerable:false,writable:true,value:r})}for(q=s.length-1;q>=0;q--){if(s[q].kind==="instance"){if(p[s[q].fieldName]){t=p[s[q].fieldName].constructor.originalSpec.__processedSpec__;o=Object.create(t.proto,t.descriptor);Object.defineProperty(o,"__stateChangeHandler",{configurable:false,enumerable:false,writable:false,value:(function(u){return p[u].__stateChangeHandler})(s[q].fieldName)});Object.defineProperty(o,"state",{configurable:true,enumerable:false,writable:true,value:p[s[q].fieldName].state});o.__proto__.setState=function(u,v){this.__stateChangeHandler.call(p,j(this.state,u),v)};Object.freeze(p[s[q].fieldName])}}else{r[s[q].fieldName]=r[s[q].fieldName]||[];Object.freeze(r[s[q].fieldName])}}Object.defineProperty(p,"state",{configurable:false,enumerable:false,writable:false,value:r});return Object.freeze(p)};return k}}};i.exports=g},{"./utils":8}]},{},[1])(1)});